{"openapi":"3.0.0","paths":{"/api/v1/auth/register":{"post":{"operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterDto"}}}},"responses":{"201":{"description":"Tenant and owner created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Email already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"summary":"Register a new tenant and owner user","tags":["Auth"]}},"/api/v1/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Authentication failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"summary":"Authenticate user and return tokens","tags":["Auth"]}},"/api/v1/auth/refresh":{"post":{"operationId":"AuthController_refresh","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"200":{"description":"New access token issued","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenResponseDto"}}}},"401":{"description":"Invalid or expired refresh token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"summary":"Exchange a refresh token for a new access token","tags":["Auth"]}},"/api/v1/auth/logout":{"post":{"operationId":"AuthController_logout","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"200":{"description":"Token revoked","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogoutResponseDto"}}}}},"summary":"Revoke a refresh token","tags":["Auth"]}},"/api/v1/health":{"get":{"operationId":"HealthController_getHealth","parameters":[],"responses":{"200":{"description":"Service is healthy","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponseDto"}}}},"503":{"description":"Database is unavailable","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"summary":"Service health check","tags":["Health"]}},"/api/v1/version":{"get":{"operationId":"VersionController_getVersion","parameters":[],"responses":{"200":{"description":"Version information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VersionResponseDto"}}}}},"summary":"Build and runtime version info","tags":["Health"]}},"/api/v1/suppliers":{"post":{"operationId":"SuppliersController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSupplierDto"}}}},"responses":{"201":{"description":"Supplier created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Supplier name already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Create supplier","tags":["Suppliers"]},"get":{"operationId":"SuppliersController_findAll","parameters":[{"name":"page","required":false,"in":"query","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"Search by name or phone","schema":{"example":"acme","type":"string"}},{"name":"status","required":false,"in":"query","schema":{"enum":["ACTIVE","INACTIVE","ALL"],"type":"string"}},{"name":"sortBy","required":false,"in":"query","schema":{"enum":["name","createdAt"],"type":"string"}},{"name":"sortOrder","required":false,"in":"query","schema":{"enum":["asc","desc"],"type":"string"}}],"responses":{"200":{"description":"Supplier list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierListResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"List suppliers","tags":["Suppliers"]}},"/api/v1/suppliers/{id}":{"get":{"operationId":"SuppliersController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"Supplier UUID","schema":{"type":"string"}}],"responses":{"200":{"description":"Supplier detail","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierResponseDto"}}}},"400":{"description":"Invalid UUID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Supplier not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Get supplier by id","tags":["Suppliers"]},"patch":{"operationId":"SuppliersController_update","parameters":[{"name":"id","required":true,"in":"path","description":"Supplier UUID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSupplierDto"}}}},"responses":{"200":{"description":"Supplier updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Supplier not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Supplier name already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Update supplier","tags":["Suppliers"]}},"/api/v1/suppliers/{id}/status":{"patch":{"operationId":"SuppliersController_updateStatus","parameters":[{"name":"id","required":true,"in":"path","description":"Supplier UUID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStatusDto"}}}},"responses":{"200":{"description":"Supplier status updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Supplier not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Update supplier status","tags":["Suppliers"]}},"/api/v1/suppliers/{id}/balance":{"get":{"operationId":"SuppliersController_getBalance","parameters":[{"name":"id","required":true,"in":"path","description":"Supplier UUID","schema":{"type":"string"}}],"responses":{"200":{"description":"Supplier balance","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierBalanceResponseDto"}}}},"400":{"description":"Invalid UUID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Supplier not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Get supplier balance","tags":["Suppliers"]}},"/api/v1/suppliers/{id}/open-documents":{"get":{"operationId":"SuppliersController_getOpenDocuments","parameters":[{"name":"id","required":true,"in":"path","description":"Supplier UUID","schema":{"type":"string"}}],"responses":{"200":{"description":"Open documents list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierOpenDocumentsResponseDto"}}}},"400":{"description":"Invalid UUID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Supplier not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Get outstanding purchase documents for a supplier","tags":["Suppliers"]}},"/api/v1/customers":{"post":{"operationId":"CustomersController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCustomerDto"}}}},"responses":{"201":{"description":"Customer created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Customer name already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Create customer","tags":["Customers"]},"get":{"operationId":"CustomersController_findAll","parameters":[{"name":"page","required":false,"in":"query","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"Search by name or phone","schema":{"example":"zaeem","type":"string"}},{"name":"status","required":false,"in":"query","schema":{"enum":["ACTIVE","INACTIVE","ALL"],"type":"string"}},{"name":"sortBy","required":false,"in":"query","schema":{"enum":["name","createdAt"],"type":"string"}},{"name":"sortOrder","required":false,"in":"query","schema":{"enum":["asc","desc"],"type":"string"}}],"responses":{"200":{"description":"Customer list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerListResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"List customers","tags":["Customers"]}},"/api/v1/customers/{id}":{"get":{"operationId":"CustomersController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"Customer UUID","schema":{"type":"string"}}],"responses":{"200":{"description":"Customer detail","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponseDto"}}}},"400":{"description":"Invalid UUID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Customer not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Get customer by id","tags":["Customers"]},"patch":{"operationId":"CustomersController_update","parameters":[{"name":"id","required":true,"in":"path","description":"Customer UUID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCustomerDto"}}}},"responses":{"200":{"description":"Customer updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Customer not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Customer name already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Update customer","tags":["Customers"]}},"/api/v1/customers/{id}/status":{"patch":{"operationId":"CustomersController_updateStatus","parameters":[{"name":"id","required":true,"in":"path","description":"Customer UUID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStatusDto"}}}},"responses":{"200":{"description":"Customer status updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Customer not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Update customer status","tags":["Customers"]}},"/api/v1/customers/{id}/balance":{"get":{"operationId":"CustomersController_getBalance","parameters":[{"name":"id","required":true,"in":"path","description":"Customer UUID","schema":{"type":"string"}}],"responses":{"200":{"description":"Customer balance","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerBalanceResponseDto"}}}},"400":{"description":"Invalid UUID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Customer not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Get customer balance","tags":["Customers"]}},"/api/v1/customers/{id}/open-documents":{"get":{"operationId":"CustomersController_getOpenDocuments","parameters":[{"name":"id","required":true,"in":"path","description":"Customer UUID","schema":{"type":"string"}}],"responses":{"200":{"description":"Open documents list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerOpenDocumentsResponseDto"}}}},"400":{"description":"Invalid UUID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Customer not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Get outstanding sale documents for a customer","tags":["Customers"]}},"/api/v1/products":{"post":{"operationId":"ProductsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateProductDto"}}}},"responses":{"201":{"description":"Product created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"SKU already exists for this tenant","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Create product","tags":["Products"]},"get":{"operationId":"ProductsController_findAll","parameters":[{"name":"page","required":false,"in":"query","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"Search by name, SKU, or category","schema":{"example":"rice","type":"string"}},{"name":"status","required":false,"in":"query","schema":{"enum":["ACTIVE","INACTIVE","ALL"],"type":"string"}},{"name":"category","required":false,"in":"query","schema":{"example":"Grocery","type":"string"}}],"responses":{"200":{"description":"Product list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductListResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"List products","tags":["Products"]}},"/api/v1/products/{id}":{"get":{"operationId":"ProductsController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"Product UUID","schema":{"type":"string"}}],"responses":{"200":{"description":"Product detail","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponseDto"}}}},"400":{"description":"Invalid UUID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Product not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Get product by id","tags":["Products"]},"patch":{"operationId":"ProductsController_update","parameters":[{"name":"id","required":true,"in":"path","description":"Product UUID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProductDto"}}}},"responses":{"200":{"description":"Product updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Product not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"SKU already exists for this tenant","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Update product","tags":["Products"]}},"/api/v1/products/{id}/status":{"patch":{"operationId":"ProductsController_updateStatus","parameters":[{"name":"id","required":true,"in":"path","description":"Product UUID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStatusDto"}}}},"responses":{"200":{"description":"Product status updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Product not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Update product status","tags":["Products"]}},"/api/v1/products/{id}/stock":{"get":{"operationId":"ProductsController_getStock","parameters":[{"name":"id","required":true,"in":"path","description":"Product UUID","schema":{"type":"string"}}],"responses":{"200":{"description":"Product stock per variant","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductStockResponseDto"}}}},"400":{"description":"Invalid UUID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Product not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Get product stock broken down by size variant","tags":["Products"]}},"/api/v1/products/{id}/variants":{"post":{"operationId":"ProductsController_addVariant","parameters":[{"name":"id","required":true,"in":"path","description":"Product UUID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateProductVariantDto"}}}},"responses":{"201":{"description":"Variant created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductVariantResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Product not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Variant with this size already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Add a size variant to a product","tags":["Products"]}},"/api/v1/products/{id}/variants/{variantId}/status":{"patch":{"operationId":"ProductsController_updateVariantStatus","parameters":[{"name":"id","required":true,"in":"path","description":"Product UUID","schema":{"type":"string"}},{"name":"variantId","required":true,"in":"path","description":"Variant UUID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStatusDto"}}}},"responses":{"200":{"description":"Variant status updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductVariantResponseDto"}}}},"400":{"description":"Cannot deactivate variant with positive stock","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Variant not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Update variant status","tags":["Products"]}},"/api/v1/payment-accounts":{"post":{"operationId":"PaymentAccountsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePaymentAccountDto"}}}},"responses":{"201":{"description":"Payment account created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentAccountResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Payment account name already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Create payment account","tags":["Payment Accounts"]},"get":{"operationId":"PaymentAccountsController_findAll","parameters":[{"name":"page","required":false,"in":"query","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"type","required":false,"in":"query","schema":{"enum":["CASH","BANK","WALLET","CARD"],"type":"string"}},{"name":"status","required":false,"in":"query","schema":{"enum":["ACTIVE","INACTIVE","ALL"],"type":"string"}}],"responses":{"200":{"description":"Payment account list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentAccountListResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"List payment accounts","tags":["Payment Accounts"]}},"/api/v1/payment-accounts/{id}":{"get":{"operationId":"PaymentAccountsController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"Payment account UUID","schema":{"type":"string"}}],"responses":{"200":{"description":"Payment account detail","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentAccountResponseDto"}}}},"400":{"description":"Invalid UUID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Payment account not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Get payment account by id","tags":["Payment Accounts"]},"patch":{"operationId":"PaymentAccountsController_update","parameters":[{"name":"id","required":true,"in":"path","description":"Payment account UUID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePaymentAccountDto"}}}},"responses":{"200":{"description":"Payment account updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentAccountResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Payment account not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Payment account name already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Update payment account","tags":["Payment Accounts"]}},"/api/v1/payment-accounts/{id}/status":{"patch":{"operationId":"PaymentAccountsController_updateStatus","parameters":[{"name":"id","required":true,"in":"path","description":"Payment account UUID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStatusDto"}}}},"responses":{"200":{"description":"Payment account status updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentAccountResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Payment account not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Update payment account status","tags":["Payment Accounts"]}},"/api/v1/payment-accounts/{id}/balance":{"get":{"operationId":"PaymentAccountsController_getBalance","parameters":[{"name":"id","required":true,"in":"path","description":"Payment account UUID","schema":{"type":"string"}}],"responses":{"200":{"description":"Payment account balance","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentAccountBalanceResponseDto"}}}},"400":{"description":"Invalid UUID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Payment account not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Get payment account balance","tags":["Payment Accounts"]}},"/api/v1/transactions/purchases/draft":{"post":{"operationId":"TransactionsController_createPurchaseDraft","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePurchaseDraftDto"}}}},"responses":{"201":{"description":"Purchase draft created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Supplier or product not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"422":{"description":"Supplier or product inactive","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Create purchase draft","tags":["Transactions"]}},"/api/v1/transactions/sales/draft":{"post":{"operationId":"TransactionsController_createSaleDraft","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSaleDraftDto"}}}},"responses":{"201":{"description":"Sale draft created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Customer or product not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"422":{"description":"Customer or product inactive","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Create sale draft","tags":["Transactions"]}},"/api/v1/transactions/supplier-payments/draft":{"post":{"operationId":"TransactionsController_createSupplierPaymentDraft","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSupplierPaymentDraftDto"}}}},"responses":{"201":{"description":"Supplier payment draft created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Supplier or payment account not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"422":{"description":"Supplier or payment account inactive","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Create supplier payment draft","tags":["Transactions"]}},"/api/v1/transactions/customer-payments/draft":{"post":{"operationId":"TransactionsController_createCustomerPaymentDraft","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCustomerPaymentDraftDto"}}}},"responses":{"201":{"description":"Customer payment draft created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Customer or payment account not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"422":{"description":"Customer or payment account inactive","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Create customer payment draft","tags":["Transactions"]}},"/api/v1/transactions/supplier-returns/draft":{"post":{"operationId":"TransactionsController_createSupplierReturnDraft","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSupplierReturnDraftDto"}}}},"responses":{"201":{"description":"Supplier return draft created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Supplier or source line not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"422":{"description":"Over-return or invalid source line","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Create supplier return draft","tags":["Transactions"]}},"/api/v1/transactions/customer-returns/draft":{"post":{"operationId":"TransactionsController_createCustomerReturnDraft","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCustomerReturnDraftDto"}}}},"responses":{"201":{"description":"Customer return draft created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Customer or source line not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"422":{"description":"Over-return or invalid source line","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Create customer return draft","tags":["Transactions"]}},"/api/v1/transactions/internal-transfers/draft":{"post":{"operationId":"TransactionsController_createInternalTransferDraft","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateInternalTransferDraftDto"}}}},"responses":{"201":{"description":"Internal transfer draft created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponseDto"}}}},"400":{"description":"Validation failed or same account","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Payment account not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"422":{"description":"Payment account inactive","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Create internal transfer draft","tags":["Transactions"]}},"/api/v1/transactions/adjustments/draft":{"post":{"operationId":"TransactionsController_createAdjustmentDraft","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAdjustmentDraftDto"}}}},"responses":{"201":{"description":"Adjustment draft created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Product not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"422":{"description":"Product inactive","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Create adjustment draft (OWNER/ADMIN only)","tags":["Transactions"]}},"/api/v1/transactions/allocations":{"get":{"operationId":"TransactionsController_listAllocations","parameters":[{"name":"supplierId","required":false,"in":"query","description":"Filter by supplier","schema":{"type":"string"}},{"name":"customerId","required":false,"in":"query","description":"Filter by customer","schema":{"type":"string"}},{"name":"purchaseId","required":false,"in":"query","description":"Filter by applies-to purchase transaction","schema":{"type":"string"}},{"name":"saleId","required":false,"in":"query","description":"Filter by applies-to sale transaction","schema":{"type":"string"}},{"name":"dateFrom","required":false,"in":"query","description":"Filter allocations from this date (inclusive)","schema":{"type":"string"}},{"name":"dateTo","required":false,"in":"query","description":"Filter allocations to this date (inclusive)","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"maximum":100,"default":20,"type":"number"}}],"responses":{"200":{"description":"Allocation list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllocationListResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"List allocations","tags":["Transactions"]}},"/api/v1/transactions/{id}/post":{"post":{"operationId":"TransactionsController_post","parameters":[{"name":"id","required":true,"in":"path","description":"Transaction UUID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostTransactionDto"}}}},"responses":{"200":{"description":"Transaction posted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Transaction not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Post transaction (finalize & create entries)","tags":["Transactions"]}},"/api/v1/transactions":{"get":{"operationId":"TransactionsController_findAll","parameters":[{"name":"page","required":false,"in":"query","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"type","required":false,"in":"query","schema":{"enum":["PURCHASE","SALE","SUPPLIER_PAYMENT","CUSTOMER_PAYMENT","SUPPLIER_RETURN","CUSTOMER_RETURN","INTERNAL_TRANSFER","ADJUSTMENT"],"type":"string"}},{"name":"status","required":false,"in":"query","schema":{"enum":["DRAFT","POSTED","VOIDED"],"type":"string"}},{"name":"dateFrom","required":false,"in":"query","schema":{"example":"2026-02-01","type":"string"}},{"name":"dateTo","required":false,"in":"query","schema":{"example":"2026-02-11","type":"string"}},{"name":"supplierId","required":false,"in":"query","schema":{"example":"supplier-uuid","type":"string"}},{"name":"customerId","required":false,"in":"query","schema":{"example":"customer-uuid","type":"string"}},{"name":"sortBy","required":false,"in":"query","schema":{"enum":["transactionDate","createdAt","totalAmount"],"type":"string"}},{"name":"sortOrder","required":false,"in":"query","schema":{"enum":["asc","desc"],"type":"string"}}],"responses":{"200":{"description":"Transaction list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionListResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"List transactions","tags":["Transactions"]}},"/api/v1/transactions/{id}":{"get":{"operationId":"TransactionsController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"Transaction UUID","schema":{"type":"string"}}],"responses":{"200":{"description":"Transaction detail","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionResponseDto"}}}},"400":{"description":"Invalid UUID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Transaction not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Get transaction by id","tags":["Transactions"]}},"/api/v1/reports/suppliers/{id}/balance":{"get":{"operationId":"ReportsController_getSupplierBalance","parameters":[{"name":"id","required":true,"in":"path","description":"Supplier UUID","schema":{"type":"string"}},{"name":"asOfDate","required":false,"in":"query","description":"Point-in-time date (defaults to today)","schema":{"example":"2026-02-20","type":"string"}}],"responses":{"200":{"description":"Supplier balance with breakdown","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierBalanceReportResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Supplier not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Supplier balance report (point-in-time)","tags":["Reports"]}},"/api/v1/reports/customers/{id}/balance":{"get":{"operationId":"ReportsController_getCustomerBalance","parameters":[{"name":"id","required":true,"in":"path","description":"Customer UUID","schema":{"type":"string"}},{"name":"asOfDate","required":false,"in":"query","description":"Point-in-time date (defaults to today)","schema":{"example":"2026-02-20","type":"string"}}],"responses":{"200":{"description":"Customer balance with breakdown","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerBalanceReportResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Customer not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Customer balance report (point-in-time)","tags":["Reports"]}},"/api/v1/reports/payment-accounts/{id}/balance":{"get":{"operationId":"ReportsController_getPaymentAccountBalance","parameters":[{"name":"id","required":true,"in":"path","description":"Payment account UUID","schema":{"type":"string"}},{"name":"asOfDate","required":false,"in":"query","description":"Point-in-time date (defaults to today)","schema":{"example":"2026-02-20","type":"string"}}],"responses":{"200":{"description":"Payment account balance with breakdown","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentAccountBalanceReportResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Payment account not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Payment account balance report (point-in-time)","tags":["Reports"]}},"/api/v1/reports/products/{id}/stock":{"get":{"operationId":"ReportsController_getProductStock","parameters":[{"name":"id","required":true,"in":"path","description":"Product UUID","schema":{"type":"string"}},{"name":"asOfDate","required":false,"in":"query","description":"Point-in-time date (defaults to today)","schema":{"example":"2026-02-20","type":"string"}}],"responses":{"200":{"description":"Product stock with movement breakdown","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductStockReportResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Product not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Product stock report (point-in-time)","tags":["Reports"]}},"/api/v1/reports/pending-receivables":{"get":{"operationId":"ReportsController_getPendingReceivables","parameters":[{"name":"asOfDate","required":false,"in":"query","description":"Point-in-time date (defaults to today)","schema":{"example":"2026-02-20","type":"string"}},{"name":"customerId","required":false,"in":"query","description":"Filter to a single customer","schema":{"type":"string"}},{"name":"minAmount","required":false,"in":"query","description":"Minimum balance threshold (default 0)","schema":{"example":0,"type":"number"}}],"responses":{"200":{"description":"Pending receivables list with open documents","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PendingReceivablesReportResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Pending receivables — all customers with outstanding AR balances","tags":["Reports"]}},"/api/v1/reports/pending-payables":{"get":{"operationId":"ReportsController_getPendingPayables","parameters":[{"name":"asOfDate","required":false,"in":"query","description":"Point-in-time date (defaults to today)","schema":{"example":"2026-02-20","type":"string"}},{"name":"supplierId","required":false,"in":"query","description":"Filter to a single supplier","schema":{"type":"string"}},{"name":"minAmount","required":false,"in":"query","description":"Minimum balance threshold (default 0)","schema":{"example":0,"type":"number"}}],"responses":{"200":{"description":"Pending payables list with open documents","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PendingPayablesReportResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Pending payables — all suppliers with outstanding AP balances","tags":["Reports"]}},"/api/v1/reports/suppliers/{id}/statement":{"get":{"operationId":"ReportsController_getSupplierStatement","parameters":[{"name":"id","required":true,"in":"path","description":"Supplier UUID","schema":{"type":"string"}},{"name":"dateFrom","required":true,"in":"query","description":"Start date inclusive (YYYY-MM-DD)","schema":{"example":"2026-01-01","type":"string"}},{"name":"dateTo","required":true,"in":"query","description":"End date inclusive (YYYY-MM-DD)","schema":{"example":"2026-02-20","type":"string"}}],"responses":{"200":{"description":"Supplier statement with opening/closing balance and ledger entries","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierStatementReportResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Supplier not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Supplier account statement with running balance","tags":["Reports"]}},"/api/v1/reports/customers/{id}/statement":{"get":{"operationId":"ReportsController_getCustomerStatement","parameters":[{"name":"id","required":true,"in":"path","description":"Customer UUID","schema":{"type":"string"}},{"name":"dateFrom","required":true,"in":"query","description":"Start date inclusive (YYYY-MM-DD)","schema":{"example":"2026-01-01","type":"string"}},{"name":"dateTo","required":true,"in":"query","description":"End date inclusive (YYYY-MM-DD)","schema":{"example":"2026-02-20","type":"string"}}],"responses":{"200":{"description":"Customer statement with opening/closing balance and ledger entries","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerStatementReportResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Customer not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Customer account statement with running balance","tags":["Reports"]}},"/api/v1/reports/payment-accounts/{id}/statement":{"get":{"operationId":"ReportsController_getPaymentAccountStatement","parameters":[{"name":"id","required":true,"in":"path","description":"Payment account UUID","schema":{"type":"string"}},{"name":"dateFrom","required":true,"in":"query","description":"Start date inclusive (YYYY-MM-DD)","schema":{"example":"2026-01-01","type":"string"}},{"name":"dateTo","required":true,"in":"query","description":"End date inclusive (YYYY-MM-DD)","schema":{"example":"2026-02-20","type":"string"}}],"responses":{"200":{"description":"Payment account statement with opening/closing balance","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentAccountStatementReportResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Payment account not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Payment account statement with running balance","tags":["Reports"]}},"/api/v1/dashboard/summary":{"get":{"operationId":"DashboardController_getSummary","parameters":[{"name":"asOfDate","required":false,"in":"query","description":"Point-in-time date (defaults to today)","schema":{"example":"2026-02-15","type":"string"}}],"responses":{"200":{"description":"Dashboard summary with cash, inventory, receivables, payables, and recent activity","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardSummaryResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Dashboard summary — tenant-wide financial snapshot","tags":["Dashboard"]}},"/api/v1/imports":{"post":{"operationId":"ImportsController_upload","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","required":["file","module"],"properties":{"file":{"type":"string","format":"binary"},"module":{"type":"string","enum":["SUPPLIERS","CUSTOMERS","PRODUCTS","OPENING_BALANCES"]}}}}}},"responses":{"201":{"description":"Import batch created with PENDING_MAPPING status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportUploadResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Upload a CSV or XLSX file to create an import batch","tags":["imports"]},"get":{"operationId":"ImportsController_list","parameters":[{"name":"module","required":false,"in":"query","schema":{"type":"string","enum":["SUPPLIERS","CUSTOMERS","PRODUCTS","OPENING_BALANCES","TRANSACTIONS"]}},{"name":"status","required":false,"in":"query","schema":{"type":"string","enum":["PENDING_MAPPING","VALIDATED","PROCESSING","COMPLETED","FAILED","ROLLED_BACK"]}},{"name":"page","required":false,"in":"query","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"minimum":1,"maximum":100,"default":20,"type":"number"}}],"responses":{"200":{"description":"Import batches list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportListResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"List import batches for the current tenant","tags":["imports"]}},"/api/v1/imports/{id}/map":{"post":{"operationId":"ImportsController_mapColumns","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ColumnMappingDto"}}}},"responses":{"200":{"description":"Rows validated; batch moved to VALIDATED status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportMapResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Import batch not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Batch status conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Map CSV/XLSX columns to system fields and validate all rows","tags":["imports"]}},"/api/v1/imports/{id}/commit":{"post":{"operationId":"ImportsController_commit","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommitImportDto"}}}},"responses":{"200":{"description":"Import committed; records created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportCommitResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Import batch not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Batch status conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Commit a validated import batch to create records","tags":["imports"]}},"/api/v1/imports/{id}/rollback":{"post":{"operationId":"ImportsController_rollback","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Import rolled back","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportRollbackResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Import batch not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Cannot rollback due to dependencies","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Rollback a completed import batch (deletes created records if no dependencies)","tags":["imports"]}},"/api/v1/imports/{id}":{"get":{"operationId":"ImportsController_detail","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"page","required":true,"in":"query","schema":{"type":"number"}},{"name":"limit","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Import batch detail","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportBatchDetailResponseDto"}}}},"400":{"description":"Validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Import batch not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearer":[]}],"summary":"Get import batch detail including paginated rows","tags":["imports"]}}},"info":{"title":"Persona Finance API","description":"Multi-tenant finance system. Standard error response format includes: `statusCode`, `message`, `errors[]`, `timestamp`, `path`, `requestId`.","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http","name":"Authorization","in":"header"}},"schemas":{"RegisterDto":{"type":"object","properties":{"tenantName":{"type":"string","example":"Acme Trading Co.","description":"Name of the business / tenant"},"fullName":{"type":"string","example":"Zaeem Hassan","description":"Owner full name"},"email":{"type":"string","example":"zaeem@acme.com","description":"Owner email address"},"password":{"type":"string","example":"MyPass123","description":"Min 8 chars, 1 uppercase, 1 lowercase, 1 number"}},"required":["tenantName","fullName","email","password"]},"TenantSummaryDto":{"type":"object","properties":{"id":{"type":"string","example":"6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2"},"name":{"type":"string","example":"Acme Trading Co."},"baseCurrency":{"type":"string","example":"PKR"},"timezone":{"type":"string","example":"Asia/Karachi"}},"required":["id","name","baseCurrency","timezone"]},"AuthUserDto":{"type":"object","properties":{"id":{"type":"string","example":"d2f2c7b5-0c2a-4aa2-9c60-6b3f94b7e8d4"},"tenantId":{"type":"string","example":"6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2"},"fullName":{"type":"string","example":"Zaeem Hassan"},"email":{"type":"string","example":"zaeem@acme.com"},"role":{"type":"string","example":"OWNER"},"tenant":{"$ref":"#/components/schemas/TenantSummaryDto"}},"required":["id","tenantId","fullName","email","role"]},"AuthResponseDto":{"type":"object","properties":{"accessToken":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"refreshToken":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"user":{"$ref":"#/components/schemas/AuthUserDto"}},"required":["accessToken","refreshToken","user"]},"ApiErrorField":{"type":"object","properties":{"field":{"type":"string","example":"name"},"message":{"type":"string","example":"must not be empty"}},"required":["field","message"]},"ApiErrorResponse":{"type":"object","properties":{"statusCode":{"type":"number","example":400},"message":{"type":"string","example":"Validation failed"},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ApiErrorField"}},"timestamp":{"type":"string","example":"2026-02-11T12:00:00.000Z"},"path":{"type":"string","example":"/api/v1/customers"},"requestId":{"type":"string","example":"req_123"}},"required":["statusCode","message","timestamp","path"]},"LoginDto":{"type":"object","properties":{"email":{"type":"string","example":"zaeem@acme.com"},"password":{"type":"string","example":"MyPass123"}},"required":["email","password"]},"RefreshTokenDto":{"type":"object","properties":{"refreshToken":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}},"required":["refreshToken"]},"RefreshTokenResponseDto":{"type":"object","properties":{"accessToken":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}},"required":["accessToken"]},"LogoutResponseDto":{"type":"object","properties":{"message":{"type":"string","example":"Logged out"}},"required":["message"]},"HealthComponentStatusDto":{"type":"object","properties":{"status":{"type":"string","example":"up"},"responseTime":{"type":"string","example":"12ms"},"message":{"type":"string","example":"Connection timeout"}},"required":["status"]},"HealthInfoDto":{"type":"object","properties":{"database":{"$ref":"#/components/schemas/HealthComponentStatusDto"},"memory":{"$ref":"#/components/schemas/HealthComponentStatusDto"}},"required":["database","memory"]},"HealthResponseDto":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"$ref":"#/components/schemas/HealthInfoDto"},"error":{"type":"object","example":{}},"details":{"$ref":"#/components/schemas/HealthInfoDto"}},"required":["status","info","error","details"]},"VersionResponseDto":{"type":"object","properties":{"version":{"type":"string","example":"1.0.0"},"environment":{"type":"string","example":"development"},"nodeVersion":{"type":"string","example":"v20.10.0"},"buildDate":{"type":"string","example":"2026-02-11T10:00:00.000Z","nullable":true,"format":"date-time"},"gitCommit":{"type":"string","example":"a1b2c3d4","nullable":true}},"required":["version","environment","nodeVersion"]},"CreateSupplierDto":{"type":"object","properties":{"name":{"type":"string","example":"Acme Supplies"},"phone":{"type":"string","example":"03001234567","maxLength":20},"address":{"type":"string","example":"Site Area, Karachi","maxLength":500},"notes":{"type":"string","example":"Preferred supplier","maxLength":1000}},"required":["name"]},"SupplierComputedDto":{"type":"object","properties":{"totalPurchases":{"type":"number","example":0,"description":"Derived total purchases in PKR (integer)"},"currentBalance":{"type":"number","example":0,"description":"Derived current balance in PKR (integer)"},"lastPurchaseDate":{"type":"string","example":null,"nullable":true,"format":"date-time"}},"required":["totalPurchases","currentBalance","lastPurchaseDate"]},"SupplierResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"tenantId":{"type":"string","example":"6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2","format":"uuid"},"name":{"type":"string","example":"Acme Supplies"},"phone":{"type":"string","example":"03001234567","nullable":true},"address":{"type":"string","example":"Site Area, Karachi","nullable":true},"notes":{"type":"string","example":"Preferred supplier","nullable":true},"status":{"type":"string","example":"ACTIVE"},"createdAt":{"type":"string","example":"2026-02-11T10:00:00.000Z","format":"date-time"},"updatedAt":{"type":"string","example":"2026-02-11T10:00:00.000Z","format":"date-time"},"createdBy":{"type":"string","example":"d2f2c7b5-0c2a-4aa2-9c60-6b3f94b7e8d4","format":"uuid","nullable":true},"_computed":{"$ref":"#/components/schemas/SupplierComputedDto"}},"required":["id","tenantId","name","status","createdAt","updatedAt","_computed"]},"SupplierListMetaDto":{"type":"object","properties":{"page":{"type":"number","example":1},"limit":{"type":"number","example":20},"total":{"type":"number","example":120},"totalPages":{"type":"number","example":6}},"required":["page","limit","total","totalPages"]},"SupplierListResponseDto":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/SupplierResponseDto"}},"meta":{"$ref":"#/components/schemas/SupplierListMetaDto"}},"required":["data","meta"]},"UpdateSupplierDto":{"type":"object","properties":{"name":{"type":"string","example":"Acme Supplies"},"phone":{"type":"string","example":"03001234567","maxLength":20},"address":{"type":"string","example":"Site Area, Karachi","maxLength":500},"notes":{"type":"string","example":"Preferred supplier","maxLength":1000}}},"UpdateStatusDto":{"type":"object","properties":{"status":{"type":"string","enum":["ACTIVE","INACTIVE"]},"reason":{"type":"string","example":"Duplicate record"}},"required":["status"]},"SupplierBalanceResponseDto":{"type":"object","properties":{"supplierId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"totalPurchases":{"type":"number","example":150000,"description":"Total purchases in PKR (integer)"},"totalPaid":{"type":"number","example":50000,"description":"Total paid in PKR (integer)"},"currentBalance":{"type":"number","example":100000,"description":"Current balance in PKR (integer)"}},"required":["supplierId","totalPurchases","totalPaid","currentBalance"]},"SupplierOpenDocumentDto":{"type":"object","properties":{"id":{"type":"string","example":"0d2bc4f0-5429-4f2d-a9ac-bf4a030f2556","format":"uuid"},"documentNumber":{"type":"string","example":"PUR-0001","nullable":true},"transactionDate":{"type":"string","example":"2026-02-11T00:00:00.000Z","format":"date-time"},"totalAmount":{"type":"number","example":50000,"description":"Total amount in PKR (integer)"},"paidAmount":{"type":"number","example":15000,"description":"Paid amount in PKR (integer)"},"outstanding":{"type":"number","example":35000,"description":"Outstanding amount in PKR (integer)"}},"required":["id","transactionDate","totalAmount","paidAmount","outstanding"]},"SupplierOpenDocumentsResponseDto":{"type":"object","properties":{"supplierId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"supplierName":{"type":"string","example":"Acme Supplies"},"totalOutstanding":{"type":"number","example":100000,"description":"Sum of outstanding purchase documents in PKR (integer)"},"unappliedCredits":{"type":"number","example":10000,"description":"Unapplied supplier return credits in PKR (integer)"},"netOutstanding":{"type":"number","example":90000,"description":"Net outstanding after applying credits in PKR (integer)"},"documents":{"type":"array","items":{"$ref":"#/components/schemas/SupplierOpenDocumentDto"}}},"required":["supplierId","supplierName","totalOutstanding","unappliedCredits","netOutstanding","documents"]},"CreateCustomerDto":{"type":"object","properties":{"name":{"type":"string","example":"Zaeem Hassan"},"phone":{"type":"string","example":"03001234567","maxLength":20},"address":{"type":"string","example":"Street 10, Karachi","maxLength":500},"notes":{"type":"string","example":"VIP customer","maxLength":1000}},"required":["name"]},"CustomerComputedDto":{"type":"object","properties":{"totalSales":{"type":"number","example":0,"description":"Derived total sales in PKR (integer)"},"currentBalance":{"type":"number","example":0,"description":"Derived current balance in PKR (integer)"},"lastSaleDate":{"type":"string","example":null,"nullable":true,"format":"date-time"}},"required":["totalSales","currentBalance","lastSaleDate"]},"CustomerResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"tenantId":{"type":"string","example":"6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2","format":"uuid"},"name":{"type":"string","example":"Zaeem Hassan"},"phone":{"type":"string","example":"03001234567","nullable":true},"address":{"type":"string","example":"Street 10, Karachi","nullable":true},"notes":{"type":"string","example":"VIP customer","nullable":true},"status":{"type":"string","example":"ACTIVE"},"createdAt":{"type":"string","example":"2026-02-11T10:00:00.000Z","format":"date-time"},"updatedAt":{"type":"string","example":"2026-02-11T10:00:00.000Z","format":"date-time"},"createdBy":{"type":"string","example":"d2f2c7b5-0c2a-4aa2-9c60-6b3f94b7e8d4","format":"uuid","nullable":true},"_computed":{"$ref":"#/components/schemas/CustomerComputedDto"}},"required":["id","tenantId","name","status","createdAt","updatedAt","_computed"]},"CustomerListMetaDto":{"type":"object","properties":{"page":{"type":"number","example":1},"limit":{"type":"number","example":20},"total":{"type":"number","example":120},"totalPages":{"type":"number","example":6}},"required":["page","limit","total","totalPages"]},"CustomerListResponseDto":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/CustomerResponseDto"}},"meta":{"$ref":"#/components/schemas/CustomerListMetaDto"}},"required":["data","meta"]},"UpdateCustomerDto":{"type":"object","properties":{"name":{"type":"string","example":"Zaeem Hassan"},"phone":{"type":"string","example":"03001234567","maxLength":20},"address":{"type":"string","example":"Street 10, Karachi","maxLength":500},"notes":{"type":"string","example":"VIP customer","maxLength":1000}}},"CustomerBalanceResponseDto":{"type":"object","properties":{"customerId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"totalSales":{"type":"number","example":150000,"description":"Total sales in PKR (integer)"},"totalPayments":{"type":"number","example":40000,"description":"Total payments received in PKR (integer)"},"totalReturns":{"type":"number","example":10000,"description":"Total return credits in PKR (integer)"},"currentBalance":{"type":"number","example":100000,"description":"Current balance in PKR (integer)"}},"required":["customerId","totalSales","totalPayments","totalReturns","currentBalance"]},"CustomerOpenDocumentDto":{"type":"object","properties":{"id":{"type":"string","example":"0d2bc4f0-5429-4f2d-a9ac-bf4a030f2556","format":"uuid"},"documentNumber":{"type":"string","example":"SAL-0001","nullable":true},"transactionDate":{"type":"string","example":"2026-02-11T00:00:00.000Z","format":"date-time"},"totalAmount":{"type":"number","example":60000,"description":"Total amount in PKR (integer)"},"paidAmount":{"type":"number","example":20000,"description":"Paid amount in PKR (integer)"},"outstanding":{"type":"number","example":40000,"description":"Outstanding amount in PKR (integer)"}},"required":["id","transactionDate","totalAmount","paidAmount","outstanding"]},"CustomerOpenDocumentsResponseDto":{"type":"object","properties":{"customerId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"customerName":{"type":"string","example":"Big Corp"},"totalOutstanding":{"type":"number","example":120000,"description":"Sum of outstanding sale documents in PKR (integer)"},"unappliedCredits":{"type":"number","example":5000,"description":"Unapplied customer return credits in PKR (integer)"},"netOutstanding":{"type":"number","example":115000,"description":"Net outstanding after applying credits in PKR (integer)"},"documents":{"type":"array","items":{"$ref":"#/components/schemas/CustomerOpenDocumentDto"}}},"required":["customerId","customerName","totalOutstanding","unappliedCredits","netOutstanding","documents"]},"CreateProductDto":{"type":"object","properties":{"name":{"type":"string","example":"Sella Rice 25kg"},"sku":{"type":"string","example":"RICE-25KG","maxLength":50,"description":"Uppercase letters, numbers, hyphens, underscores"},"category":{"type":"string","example":"Grocery","maxLength":100},"unit":{"type":"string","example":"bag","maxLength":20,"default":"piece"}},"required":["name"]},"ProductVariantResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"a1b2c3d4-0000-0000-0000-000000000001","format":"uuid"},"productId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"size":{"type":"string","example":"38","description":"Size label, e.g. S, M, L, 38, 40, one-size"},"sku":{"type":"string","example":"SUIT-NAVY-38","nullable":true},"avgCost":{"type":"number","example":12000,"description":"Average cost in PKR (integer)"},"status":{"type":"string","example":"ACTIVE"},"createdAt":{"type":"string","example":"2026-02-11T10:00:00.000Z","format":"date-time"},"updatedAt":{"type":"string","example":"2026-02-11T10:00:00.000Z","format":"date-time"}},"required":["id","productId","size","avgCost","status","createdAt","updatedAt"]},"ProductResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"tenantId":{"type":"string","example":"6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2","format":"uuid"},"name":{"type":"string","example":"Gul Ahmed Suit - Navy"},"sku":{"type":"string","example":"SUIT-NAVY","nullable":true},"category":{"type":"string","example":"Suits","nullable":true},"unit":{"type":"string","example":"piece","nullable":true},"status":{"type":"string","example":"ACTIVE"},"createdAt":{"type":"string","example":"2026-02-11T10:00:00.000Z","format":"date-time"},"updatedAt":{"type":"string","example":"2026-02-11T10:00:00.000Z","format":"date-time"},"createdBy":{"type":"string","example":"d2f2c7b5-0c2a-4aa2-9c60-6b3f94b7e8d4","format":"uuid","nullable":true},"variants":{"type":"array","items":{"$ref":"#/components/schemas/ProductVariantResponseDto"}}},"required":["id","tenantId","name","status","createdAt","updatedAt","variants"]},"ProductListMetaDto":{"type":"object","properties":{"page":{"type":"number","example":1},"limit":{"type":"number","example":20},"total":{"type":"number","example":120},"totalPages":{"type":"number","example":6}},"required":["page","limit","total","totalPages"]},"ProductListResponseDto":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/ProductResponseDto"}},"meta":{"$ref":"#/components/schemas/ProductListMetaDto"}},"required":["data","meta"]},"UpdateProductDto":{"type":"object","properties":{"name":{"type":"string","example":"Sella Rice 25kg"},"sku":{"type":"string","example":"RICE-25KG","maxLength":50,"description":"Uppercase letters, numbers, hyphens, underscores"},"category":{"type":"string","example":"Grocery","maxLength":100},"unit":{"type":"string","example":"bag","maxLength":20}}},"VariantStockDto":{"type":"object","properties":{"variantId":{"type":"string","example":"a1b2c3d4-0000-0000-0000-000000000001","format":"uuid"},"size":{"type":"string","example":"38"},"sku":{"type":"string","example":"SUIT-NAVY-38","nullable":true},"currentStock":{"type":"number","example":15},"avgCost":{"type":"number","example":12000,"description":"Average cost in PKR (integer)"}},"required":["variantId","size","currentStock","avgCost"]},"ProductStockResponseDto":{"type":"object","properties":{"productId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"productName":{"type":"string","example":"Gul Ahmed Suit - Navy"},"totalStock":{"type":"number","example":45,"description":"Total stock across all sizes"},"variants":{"description":"Per-size breakdown","type":"array","items":{"$ref":"#/components/schemas/VariantStockDto"}}},"required":["productId","productName","totalStock","variants"]},"CreateProductVariantDto":{"type":"object","properties":{"size":{"type":"string","example":"38","description":"Size label, e.g. S, M, L, 38, 40, one-size"},"sku":{"type":"string","example":"SUIT-NAVY-38","maxLength":50,"description":"Variant-specific SKU (uppercase letters, numbers, hyphens, underscores)"}},"required":["size"]},"CreatePaymentAccountDto":{"type":"object","properties":{"name":{"type":"string","example":"Main Cash"},"type":{"type":"string","enum":["CASH","BANK","WALLET","CARD"]},"openingBalance":{"type":"number","example":25000,"default":0,"description":"Opening balance in PKR (integer)"}},"required":["name","type"]},"PaymentAccountComputedDto":{"type":"object","properties":{"currentBalance":{"type":"number","example":0,"description":"Derived current balance in PKR (integer)"},"totalIn":{"type":"number","example":0,"description":"Derived total in amount in PKR (integer)"},"totalOut":{"type":"number","example":0,"description":"Derived total out amount in PKR (integer)"},"lastTransactionDate":{"type":"string","example":null,"nullable":true,"format":"date-time"}},"required":["currentBalance","totalIn","totalOut","lastTransactionDate"]},"PaymentAccountResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"tenantId":{"type":"string","example":"6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2","format":"uuid"},"name":{"type":"string","example":"Main Cash"},"type":{"type":"string","example":"CASH"},"openingBalance":{"type":"number","example":25000,"description":"Opening balance in PKR (integer)"},"status":{"type":"string","example":"ACTIVE"},"createdAt":{"type":"string","example":"2026-02-11T10:00:00.000Z","format":"date-time"},"updatedAt":{"type":"string","example":"2026-02-11T10:00:00.000Z","format":"date-time"},"createdBy":{"type":"string","example":"d2f2c7b5-0c2a-4aa2-9c60-6b3f94b7e8d4","format":"uuid","nullable":true},"_computed":{"$ref":"#/components/schemas/PaymentAccountComputedDto"}},"required":["id","tenantId","name","type","openingBalance","status","createdAt","updatedAt","_computed"]},"PaymentAccountListMetaDto":{"type":"object","properties":{"page":{"type":"number","example":1},"limit":{"type":"number","example":20},"total":{"type":"number","example":120},"totalPages":{"type":"number","example":6}},"required":["page","limit","total","totalPages"]},"PaymentAccountListResponseDto":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/PaymentAccountResponseDto"}},"meta":{"$ref":"#/components/schemas/PaymentAccountListMetaDto"}},"required":["data","meta"]},"UpdatePaymentAccountDto":{"type":"object","properties":{"name":{"type":"string","example":"Main Cash"}}},"PaymentAccountBalanceResponseDto":{"type":"object","properties":{"paymentAccountId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"openingBalance":{"type":"number","example":25000,"description":"Opening balance in PKR (integer)"},"totalIn":{"type":"number","example":150000,"description":"Total in amount in PKR (integer)"},"totalOut":{"type":"number","example":50000,"description":"Total out amount in PKR (integer)"},"currentBalance":{"type":"number","example":125000,"description":"Current balance in PKR (integer)"}},"required":["paymentAccountId","openingBalance","totalIn","totalOut","currentBalance"]},"PurchaseLineDto":{"type":"object","properties":{"variantId":{"type":"string","example":"variant-uuid","description":"ProductVariant UUID (specific size)"},"quantity":{"type":"number","example":5},"unitCost":{"type":"number","example":12000,"description":"Unit cost in PKR (integer)"},"discountAmount":{"type":"number","example":0,"description":"Discount amount in PKR (integer)"}},"required":["variantId","quantity","unitCost"]},"CreatePurchaseDraftDto":{"type":"object","properties":{"supplierId":{"type":"string","example":"supplier-uuid"},"transactionDate":{"type":"string","example":"2026-02-10"},"lines":{"type":"array","items":{"$ref":"#/components/schemas/PurchaseLineDto"}},"deliveryFee":{"type":"number","example":2000,"description":"Delivery fee in PKR (integer)"},"notes":{"type":"string","example":"Handle with care","maxLength":1000},"idempotencyKey":{"type":"string","example":"client-generated-uuid-v4","maxLength":64,"description":"Client-supplied idempotency key"}},"required":["supplierId","transactionDate","lines"]},"TransactionLineResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"f2bb9d7a-7c7b-4a6d-95d6-5f2d4e1f1b3a","format":"uuid"},"transactionId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"variantId":{"type":"string","example":"c4c8d1e8-2d1b-4f2b-9f8a-2b3d9a8d1f0a","format":"uuid","description":"ProductVariant UUID"},"variantSize":{"type":"string","example":"38","description":"Size label from the variant","nullable":true},"productId":{"type":"string","example":"e1c3f8d2-1b2a-4a3b-9b8c-1a2b3c4d5e6f","format":"uuid","nullable":true,"description":"Parent product UUID"},"quantity":{"type":"number","example":5},"unitCost":{"type":"number","example":12000,"description":"Unit cost in PKR (integer) — present on purchase-type transactions"},"unitPrice":{"type":"number","example":15000,"description":"Unit price in PKR (integer) — present on sale-type transactions"},"discountAmount":{"type":"number","example":0,"description":"Discount amount in PKR (integer)"},"lineTotal":{"type":"number","example":60000,"description":"Line total in PKR (integer)"},"costTotal":{"type":"number","example":60000,"description":"Cost total in PKR (integer)"}},"required":["id","transactionId","variantId","quantity","discountAmount","lineTotal","costTotal"]},"TransactionResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"tenantId":{"type":"string","example":"6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2","format":"uuid"},"type":{"type":"string","example":"PURCHASE"},"status":{"type":"string","example":"DRAFT"},"transactionDate":{"type":"string","example":"2026-02-10T00:00:00.000Z","format":"date-time"},"supplierId":{"type":"string","example":"supplier-uuid","format":"uuid","nullable":true},"customerId":{"type":"string","example":"customer-uuid","format":"uuid","nullable":true},"subtotal":{"type":"number","example":50000,"description":"Subtotal in PKR (integer)"},"discountTotal":{"type":"number","example":0,"description":"Discount total in PKR (integer)"},"deliveryFee":{"type":"number","example":2000,"description":"Delivery fee in PKR (integer)"},"totalAmount":{"type":"number","example":52000,"description":"Total amount in PKR (integer)"},"deliveryType":{"type":"string","example":"DELIVERY","nullable":true},"deliveryAddress":{"type":"string","example":"Karachi, Pakistan","nullable":true},"notes":{"type":"string","example":"Urgent","nullable":true},"createdAt":{"type":"string","example":"2026-02-11T10:00:00.000Z","format":"date-time"},"updatedAt":{"type":"string","example":"2026-02-11T10:00:00.000Z","format":"date-time"},"transactionLines":{"type":"array","items":{"$ref":"#/components/schemas/TransactionLineResponseDto"}}},"required":["id","tenantId","type","status","transactionDate","subtotal","discountTotal","deliveryFee","totalAmount","createdAt","updatedAt","transactionLines"]},"SaleLineDto":{"type":"object","properties":{"variantId":{"type":"string","example":"variant-uuid","description":"ProductVariant UUID (specific size)"},"quantity":{"type":"number","example":3},"unitPrice":{"type":"number","example":15000,"description":"Unit price in PKR (integer)"},"discountAmount":{"type":"number","example":0,"description":"Discount amount in PKR (integer)"}},"required":["variantId","quantity","unitPrice"]},"CreateSaleDraftDto":{"type":"object","properties":{"customerId":{"type":"string","example":"customer-uuid"},"transactionDate":{"type":"string","example":"2026-02-10"},"lines":{"type":"array","items":{"$ref":"#/components/schemas/SaleLineDto"}},"deliveryFee":{"type":"number","example":1500,"description":"Delivery fee in PKR (integer)"},"deliveryType":{"type":"string","enum":["STORE_PICKUP","HOME_DELIVERY"]},"deliveryAddress":{"type":"string","example":"Street 10, Karachi","maxLength":500},"notes":{"type":"string","example":"Deliver before 5 PM","maxLength":1000},"idempotencyKey":{"type":"string","example":"client-generated-uuid-v4","maxLength":64,"description":"Client-supplied idempotency key"}},"required":["customerId","transactionDate","lines"]},"CreateSupplierPaymentDraftDto":{"type":"object","properties":{"supplierId":{"type":"string","description":"Supplier UUID"},"amount":{"type":"number","description":"Payment amount in PKR (integer, Min 1)"},"paymentAccountId":{"type":"string","description":"Payment account UUID"},"transactionDate":{"type":"string","example":"2026-02-12","description":"Transaction date (YYYY-MM-DD)"},"notes":{"type":"string","example":"Advance payment for invoice INV-1001","maxLength":1000},"idempotencyKey":{"type":"string","example":"client-generated-uuid-v4","maxLength":64,"description":"Client-supplied idempotency key"}},"required":["supplierId","amount","paymentAccountId","transactionDate"]},"CreateCustomerPaymentDraftDto":{"type":"object","properties":{"customerId":{"type":"string","description":"Customer UUID"},"amount":{"type":"number","description":"Payment amount in PKR (integer, Min 1)"},"paymentAccountId":{"type":"string","description":"Payment account UUID"},"transactionDate":{"type":"string","example":"2026-02-12","description":"Transaction date (YYYY-MM-DD)"},"notes":{"type":"string","example":"Receipt against invoice INV-2001","maxLength":1000},"idempotencyKey":{"type":"string","example":"client-generated-uuid-v4","maxLength":64,"description":"Client-supplied idempotency key"}},"required":["customerId","amount","paymentAccountId","transactionDate"]},"SupplierReturnLineDto":{"type":"object","properties":{"sourceTransactionLineId":{"type":"string","example":"source-transaction-line-uuid"},"quantity":{"type":"number","example":2}},"required":["sourceTransactionLineId","quantity"]},"CreateSupplierReturnDraftDto":{"type":"object","properties":{"supplierId":{"type":"string","example":"supplier-uuid"},"transactionDate":{"type":"string","example":"2026-02-10"},"lines":{"type":"array","items":{"$ref":"#/components/schemas/SupplierReturnLineDto"}},"notes":{"type":"string","example":"Defective items returned","maxLength":1000},"idempotencyKey":{"type":"string","example":"client-generated-uuid-v4","maxLength":64,"description":"Client-supplied idempotency key"}},"required":["supplierId","transactionDate","lines"]},"CustomerReturnLineDto":{"type":"object","properties":{"sourceTransactionLineId":{"type":"string","example":"source-transaction-line-uuid"},"quantity":{"type":"number","example":2}},"required":["sourceTransactionLineId","quantity"]},"CreateCustomerReturnDraftDto":{"type":"object","properties":{"customerId":{"type":"string","example":"customer-uuid"},"transactionDate":{"type":"string","example":"2026-02-10"},"lines":{"type":"array","items":{"$ref":"#/components/schemas/CustomerReturnLineDto"}},"notes":{"type":"string","example":"Customer returned wrong size","maxLength":1000},"idempotencyKey":{"type":"string","example":"client-generated-uuid-v4","maxLength":64,"description":"Client-supplied idempotency key"}},"required":["customerId","transactionDate","lines"]},"CreateInternalTransferDraftDto":{"type":"object","properties":{"fromPaymentAccountId":{"type":"string","example":"from-account-uuid"},"toPaymentAccountId":{"type":"string","example":"to-account-uuid"},"amount":{"type":"number","example":5000,"description":"Transfer amount in PKR (integer)"},"transactionDate":{"type":"string","example":"2026-02-10"},"notes":{"type":"string","example":"Monthly cash transfer to bank","maxLength":1000},"idempotencyKey":{"type":"string","example":"client-generated-uuid-v4","maxLength":64,"description":"Client-supplied idempotency key"}},"required":["fromPaymentAccountId","toPaymentAccountId","amount","transactionDate"]},"AdjustmentLineDto":{"type":"object","properties":{"variantId":{"type":"string","example":"variant-uuid","description":"ProductVariant UUID (specific size)"},"quantity":{"type":"number","example":5},"direction":{"type":"string","enum":["IN","OUT"],"example":"IN"},"reason":{"type":"string","example":"Damaged goods write-off","maxLength":500}},"required":["variantId","quantity","direction","reason"]},"CreateAdjustmentDraftDto":{"type":"object","properties":{"transactionDate":{"type":"string","example":"2026-02-10"},"lines":{"type":"array","items":{"$ref":"#/components/schemas/AdjustmentLineDto"}},"notes":{"type":"string","example":"Year-end stock reconciliation","maxLength":1000},"idempotencyKey":{"type":"string","example":"client-generated-uuid-v4","maxLength":64,"description":"Client-supplied idempotency key"}},"required":["transactionDate","lines"]},"AllocationTransactionRefDto":{"type":"object","properties":{"id":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"documentNumber":{"type":"string","example":"TXN-0001","nullable":true},"transactionDate":{"type":"string","example":"2026-02-11","format":"date"},"totalAmount":{"type":"number","example":52000,"description":"Transaction total amount in PKR (integer)"},"type":{"type":"string","example":"SUPPLIER_PAYMENT"}},"required":["id","transactionDate","totalAmount","type"]},"AllocationResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"c01b86e8-6c66-4906-9f84-c3588308c532","format":"uuid"},"tenantId":{"type":"string","example":"6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2","format":"uuid"},"paymentTransactionId":{"type":"string","example":"e2005751-702e-4b3f-bec9-78c8697ddf46","format":"uuid"},"appliesToTransactionId":{"type":"string","example":"0125c4dc-7c64-4560-aac2-f5f3f98ff1a8","format":"uuid"},"amountApplied":{"type":"number","example":15000,"description":"Allocation amount in PKR (integer)"},"createdAt":{"type":"string","example":"2026-02-11T10:00:00.000Z","format":"date-time"},"updatedAt":{"type":"string","example":"2026-02-11T10:00:00.000Z","format":"date-time"},"paymentTransaction":{"$ref":"#/components/schemas/AllocationTransactionRefDto"},"appliesToTransaction":{"$ref":"#/components/schemas/AllocationTransactionRefDto"}},"required":["id","tenantId","paymentTransactionId","appliesToTransactionId","amountApplied","createdAt","updatedAt","paymentTransaction","appliesToTransaction"]},"AllocationListMetaDto":{"type":"object","properties":{"page":{"type":"number","example":1},"limit":{"type":"number","example":20},"total":{"type":"number","example":120},"totalPages":{"type":"number","example":6}},"required":["page","limit","total","totalPages"]},"AllocationListResponseDto":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/AllocationResponseDto"}},"meta":{"$ref":"#/components/schemas/AllocationListMetaDto"}},"required":["data","meta"]},"PaymentAllocationItemDto":{"type":"object","properties":{"transactionId":{"type":"string","description":"The purchase/sale transaction being allocated to"},"amount":{"type":"number","description":"Amount to apply (integer, Min 1)"}},"required":["transactionId","amount"]},"PostTransactionDto":{"type":"object","properties":{"idempotencyKey":{"type":"string","example":"post-2026-02-11-0001","description":"Idempotency key to prevent double posting"},"paidNow":{"type":"number","example":0,"description":"Amount paid now in PKR (integer)"},"receivedNow":{"type":"number","example":0,"description":"Amount received now in PKR (integer)"},"paymentAccountId":{"type":"string","example":"payment-account-uuid"},"allocations":{"description":"Manual allocations (for SUPPLIER_PAYMENT / CUSTOMER_PAYMENT only). Omit for auto-allocation.","type":"array","items":{"$ref":"#/components/schemas/PaymentAllocationItemDto"}},"returnHandling":{"type":"string","enum":["REFUND_NOW","STORE_CREDIT"],"description":"How to handle a CUSTOMER_RETURN at posting time"}},"required":["idempotencyKey"]},"TransactionListMetaDto":{"type":"object","properties":{"page":{"type":"number","example":1},"limit":{"type":"number","example":20},"total":{"type":"number","example":120},"totalPages":{"type":"number","example":6}},"required":["page","limit","total","totalPages"]},"TransactionListResponseDto":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/TransactionResponseDto"}},"meta":{"$ref":"#/components/schemas/TransactionListMetaDto"}},"required":["data","meta"]},"ReportAmountCountDto":{"type":"object","properties":{"count":{"type":"number","example":12},"totalAmount":{"type":"number","example":125000,"description":"Amount in PKR (integer)"}},"required":["count","totalAmount"]},"SupplierBalanceBreakdownDto":{"type":"object","properties":{"purchases":{"$ref":"#/components/schemas/ReportAmountCountDto"},"payments":{"$ref":"#/components/schemas/ReportAmountCountDto"},"returns":{"$ref":"#/components/schemas/ReportAmountCountDto"},"netPayable":{"type":"number","example":100000,"description":"Net payable in PKR (integer)"}},"required":["purchases","payments","returns","netPayable"]},"SupplierBalanceReportResponseDto":{"type":"object","properties":{"supplierId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"supplierName":{"type":"string","example":"Acme Supplies"},"asOfDate":{"type":"string","example":"2026-02-20","format":"date"},"balance":{"type":"number","example":100000,"description":"Balance in PKR (integer)"},"balanceType":{"type":"string","example":"PAYABLE"},"breakdown":{"$ref":"#/components/schemas/SupplierBalanceBreakdownDto"}},"required":["supplierId","supplierName","asOfDate","balance","balanceType","breakdown"]},"CustomerBalanceBreakdownDto":{"type":"object","properties":{"sales":{"$ref":"#/components/schemas/ReportAmountCountDto"},"payments":{"$ref":"#/components/schemas/ReportAmountCountDto"},"returns":{"$ref":"#/components/schemas/ReportAmountCountDto"},"netReceivable":{"type":"number","example":100000,"description":"Net receivable in PKR (integer)"}},"required":["sales","payments","returns","netReceivable"]},"CustomerBalanceReportResponseDto":{"type":"object","properties":{"customerId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"customerName":{"type":"string","example":"Big Corp"},"asOfDate":{"type":"string","example":"2026-02-20","format":"date"},"balance":{"type":"number","example":100000,"description":"Balance in PKR (integer)"},"balanceType":{"type":"string","example":"RECEIVABLE"},"breakdown":{"$ref":"#/components/schemas/CustomerBalanceBreakdownDto"}},"required":["customerId","customerName","asOfDate","balance","balanceType","breakdown"]},"PaymentAccountBalanceBreakdownDto":{"type":"object","properties":{"openingBalance":{"type":"number","example":25000,"description":"Opening balance in PKR (integer)"},"moneyIn":{"$ref":"#/components/schemas/ReportAmountCountDto"},"moneyOut":{"$ref":"#/components/schemas/ReportAmountCountDto"},"currentBalance":{"type":"number","example":125000,"description":"Current balance in PKR (integer)"}},"required":["openingBalance","moneyIn","moneyOut","currentBalance"]},"PaymentAccountBalanceReportResponseDto":{"type":"object","properties":{"accountId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"accountName":{"type":"string","example":"Main Cash"},"accountType":{"type":"string","example":"CASH"},"asOfDate":{"type":"string","example":"2026-02-20","format":"date"},"balance":{"type":"number","example":125000,"description":"Balance in PKR (integer)"},"breakdown":{"$ref":"#/components/schemas/PaymentAccountBalanceBreakdownDto"}},"required":["accountId","accountName","accountType","asOfDate","balance","breakdown"]},"ProductStockBreakdownDto":{"type":"object","properties":{"purchasesIn":{"type":"number","example":100},"salesOut":{"type":"number","example":30},"customerReturnsIn":{"type":"number","example":5},"supplierReturnsOut":{"type":"number","example":2},"adjustmentsIn":{"type":"number","example":3},"adjustmentsOut":{"type":"number","example":1},"netStock":{"type":"number","example":75}},"required":["purchasesIn","salesOut","customerReturnsIn","supplierReturnsOut","adjustmentsIn","adjustmentsOut","netStock"]},"ProductStockReportResponseDto":{"type":"object","properties":{"productId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"productName":{"type":"string","example":"Sella Rice 25kg"},"sku":{"type":"string","example":"RICE-25KG","nullable":true},"asOfDate":{"type":"string","example":"2026-02-20","format":"date"},"currentStock":{"type":"number","example":75},"avgCost":{"type":"number","example":1200,"description":"Average cost in PKR (integer)"},"stockValue":{"type":"number","example":90000,"description":"Stock valuation in PKR (integer)"},"breakdown":{"$ref":"#/components/schemas/ProductStockBreakdownDto"}},"required":["productId","productName","asOfDate","currentStock","avgCost","stockValue","breakdown"]},"PendingDocumentDto":{"type":"object","properties":{"documentNumber":{"type":"string","example":"SAL-0001","nullable":true},"transactionDate":{"type":"string","example":"2026-02-10","format":"date"},"totalAmount":{"type":"number","example":50000,"description":"Document total in PKR (integer)"},"paidAmount":{"type":"number","example":10000,"description":"Paid amount in PKR (integer)"},"outstanding":{"type":"number","example":40000,"description":"Outstanding amount in PKR (integer)"},"daysPastDue":{"type":"number","example":10}},"required":["transactionDate","totalAmount","paidAmount","outstanding","daysPastDue"]},"PendingReceivableCustomerDto":{"type":"object","properties":{"customerId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"customerName":{"type":"string","example":"Big Corp"},"balance":{"type":"number","example":120000,"description":"Customer outstanding balance in PKR (integer)"},"oldestInvoiceDate":{"type":"string","example":"2026-01-25","nullable":true,"format":"date"},"daysPastDue":{"type":"number","example":26},"openDocuments":{"type":"array","items":{"$ref":"#/components/schemas/PendingDocumentDto"}}},"required":["customerId","customerName","balance","daysPastDue","openDocuments"]},"PendingReceivablesReportResponseDto":{"type":"object","properties":{"asOfDate":{"type":"string","example":"2026-02-20","format":"date"},"totalReceivables":{"type":"number","example":350000,"description":"Total receivables in PKR (integer)"},"customerCount":{"type":"number","example":7},"customers":{"type":"array","items":{"$ref":"#/components/schemas/PendingReceivableCustomerDto"}}},"required":["asOfDate","totalReceivables","customerCount","customers"]},"PendingPayableSupplierDto":{"type":"object","properties":{"supplierId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"supplierName":{"type":"string","example":"Acme Supplies"},"balance":{"type":"number","example":98000,"description":"Supplier outstanding balance in PKR (integer)"},"oldestInvoiceDate":{"type":"string","example":"2026-01-23","nullable":true,"format":"date"},"daysPastDue":{"type":"number","example":28},"openDocuments":{"type":"array","items":{"$ref":"#/components/schemas/PendingDocumentDto"}}},"required":["supplierId","supplierName","balance","daysPastDue","openDocuments"]},"PendingPayablesReportResponseDto":{"type":"object","properties":{"asOfDate":{"type":"string","example":"2026-02-20","format":"date"},"totalPayables":{"type":"number","example":280000,"description":"Total payables in PKR (integer)"},"supplierCount":{"type":"number","example":5},"suppliers":{"type":"array","items":{"$ref":"#/components/schemas/PendingPayableSupplierDto"}}},"required":["asOfDate","totalPayables","supplierCount","suppliers"]},"StatementDebitCreditEntryDto":{"type":"object","properties":{"date":{"type":"string","example":"2026-02-10","format":"date"},"documentNumber":{"type":"string","example":"PUR-0001","nullable":true},"type":{"type":"string","example":"PURCHASE"},"debit":{"type":"number","example":50000,"description":"Debit amount in PKR (integer)"},"credit":{"type":"number","example":10000,"description":"Credit amount in PKR (integer)"},"runningBalance":{"type":"number","example":40000,"description":"Running balance in PKR (integer)"}},"required":["date","type","debit","credit","runningBalance"]},"SupplierStatementReportResponseDto":{"type":"object","properties":{"supplierId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"supplierName":{"type":"string","example":"Acme Supplies"},"dateFrom":{"type":"string","example":"2026-01-01","format":"date"},"dateTo":{"type":"string","example":"2026-02-20","format":"date"},"openingBalance":{"type":"number","example":15000,"description":"Opening balance in PKR (integer)"},"closingBalance":{"type":"number","example":100000,"description":"Closing balance in PKR (integer)"},"entries":{"type":"array","items":{"$ref":"#/components/schemas/StatementDebitCreditEntryDto"}}},"required":["supplierId","supplierName","dateFrom","dateTo","openingBalance","closingBalance","entries"]},"CustomerStatementReportResponseDto":{"type":"object","properties":{"customerId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"customerName":{"type":"string","example":"Big Corp"},"dateFrom":{"type":"string","example":"2026-01-01","format":"date"},"dateTo":{"type":"string","example":"2026-02-20","format":"date"},"openingBalance":{"type":"number","example":25000,"description":"Opening balance in PKR (integer)"},"closingBalance":{"type":"number","example":130000,"description":"Closing balance in PKR (integer)"},"entries":{"type":"array","items":{"$ref":"#/components/schemas/StatementDebitCreditEntryDto"}}},"required":["customerId","customerName","dateFrom","dateTo","openingBalance","closingBalance","entries"]},"StatementMoneyEntryDto":{"type":"object","properties":{"date":{"type":"string","example":"2026-02-10","format":"date"},"documentNumber":{"type":"string","example":"PAY-0001","nullable":true},"type":{"type":"string","example":"SUPPLIER_PAYMENT"},"moneyIn":{"type":"number","example":50000,"description":"Money in amount in PKR (integer)"},"moneyOut":{"type":"number","example":10000,"description":"Money out amount in PKR (integer)"},"runningBalance":{"type":"number","example":40000,"description":"Running balance in PKR (integer)"}},"required":["date","type","moneyIn","moneyOut","runningBalance"]},"PaymentAccountStatementReportResponseDto":{"type":"object","properties":{"accountId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"accountName":{"type":"string","example":"Main Cash"},"dateFrom":{"type":"string","example":"2026-01-01","format":"date"},"dateTo":{"type":"string","example":"2026-02-20","format":"date"},"openingBalance":{"type":"number","example":25000,"description":"Opening balance in PKR (integer)"},"closingBalance":{"type":"number","example":90000,"description":"Closing balance in PKR (integer)"},"entries":{"type":"array","items":{"$ref":"#/components/schemas/StatementMoneyEntryDto"}}},"required":["accountId","accountName","dateFrom","dateTo","openingBalance","closingBalance","entries"]},"DashboardAccountBalanceDto":{"type":"object","properties":{"name":{"type":"string","example":"Main Cash"},"balance":{"type":"number","example":125000,"description":"Account balance in PKR (integer)"}},"required":["name","balance"]},"DashboardCashSummaryDto":{"type":"object","properties":{"totalBalance":{"type":"number","example":250000,"description":"Total cash balance in PKR (integer)"},"accounts":{"type":"array","items":{"$ref":"#/components/schemas/DashboardAccountBalanceDto"}}},"required":["totalBalance","accounts"]},"DashboardInventorySummaryDto":{"type":"object","properties":{"totalValue":{"type":"number","example":1400000,"description":"Inventory value in PKR (integer)"},"totalProducts":{"type":"number","example":120},"lowStockCount":{"type":"number","example":9}},"required":["totalValue","totalProducts","lowStockCount"]},"DashboardReceivablesSummaryDto":{"type":"object","properties":{"totalAmount":{"type":"number","example":500000,"description":"Total receivables in PKR (integer)"},"customerCount":{"type":"number","example":23},"overdueAmount":{"type":"number","example":180000,"description":"Overdue receivables in PKR (integer)"},"overdueCount":{"type":"number","example":8}},"required":["totalAmount","customerCount","overdueAmount","overdueCount"]},"DashboardPayablesSummaryDto":{"type":"object","properties":{"totalAmount":{"type":"number","example":300000,"description":"Total payables in PKR (integer)"},"supplierCount":{"type":"number","example":15},"overdueAmount":{"type":"number","example":90000,"description":"Overdue payables in PKR (integer)"},"overdueCount":{"type":"number","example":5}},"required":["totalAmount","supplierCount","overdueAmount","overdueCount"]},"DashboardRecentActivitySummaryDto":{"type":"object","properties":{"todaySales":{"type":"number","example":75000,"description":"Today sales in PKR (integer)"},"todayPurchases":{"type":"number","example":45000,"description":"Today purchases in PKR (integer)"},"todayPayments":{"type":"number","example":20000,"description":"Today supplier payments in PKR (integer)"},"todayReceipts":{"type":"number","example":35000,"description":"Today customer receipts in PKR (integer)"}},"required":["todaySales","todayPurchases","todayPayments","todayReceipts"]},"DashboardSummaryResponseDto":{"type":"object","properties":{"asOfDate":{"type":"string","example":"2026-02-15","format":"date"},"cash":{"$ref":"#/components/schemas/DashboardCashSummaryDto"},"inventory":{"$ref":"#/components/schemas/DashboardInventorySummaryDto"},"receivables":{"$ref":"#/components/schemas/DashboardReceivablesSummaryDto"},"payables":{"$ref":"#/components/schemas/DashboardPayablesSummaryDto"},"recentActivity":{"$ref":"#/components/schemas/DashboardRecentActivitySummaryDto"}},"required":["asOfDate","cash","inventory","receivables","payables","recentActivity"]},"ImportRequiredFieldDto":{"type":"object","properties":{"field":{"type":"string","example":"name"},"required":{"type":"boolean","example":true}},"required":["field","required"]},"ImportUploadResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"47bd46cc-38aa-4d9f-8553-c0ec6f8885e6","format":"uuid"},"module":{"type":"string","enum":["SUPPLIERS","CUSTOMERS","PRODUCTS","OPENING_BALANCES","TRANSACTIONS"]},"fileName":{"type":"string","example":"suppliers.csv","nullable":true},"totalRows":{"type":"number","example":200},"status":{"type":"string","enum":["PENDING_MAPPING","VALIDATED","PROCESSING","COMPLETED","FAILED","ROLLED_BACK"],"example":"PENDING_MAPPING"},"detectedColumns":{"example":["Company Name","Phone"],"type":"array","items":{"type":"string"}},"requiredFields":{"type":"array","items":{"$ref":"#/components/schemas/ImportRequiredFieldDto"}},"createdAt":{"type":"string","example":"2026-02-16T10:00:00.000Z","format":"date-time"}},"required":["id","module","totalRows","status","detectedColumns","requiredFields","createdAt"]},"ColumnMappingDto":{"type":"object","properties":{"columnMappings":{"type":"object","description":"Maps system field names to detected column headers. Key = system field, value = CSV/XLSX column header.","example":{"name":"Company Name","phone":"Phone Number"}}},"required":["columnMappings"]},"ImportMapErrorDto":{"type":"object","properties":{"rowNumber":{"type":"number","example":3},"field":{"type":"string","example":"name","nullable":true},"error":{"type":"string","example":"name is required"},"value":{"type":"string","example":""}},"required":["rowNumber","error","value"]},"ImportMapPreviewItemDto":{"type":"object","properties":{"rowNumber":{"type":"number","example":1},"data":{"type":"object","additionalProperties":{"type":"string"},"example":{"name":"Acme Supplies","phone":"03001234567"}},"status":{"type":"string","example":"VALID"}},"required":["rowNumber","data","status"]},"ImportMapResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"47bd46cc-38aa-4d9f-8553-c0ec6f8885e6","format":"uuid"},"status":{"type":"string","enum":["PENDING_MAPPING","VALIDATED","PROCESSING","COMPLETED","FAILED","ROLLED_BACK"],"example":"VALIDATED"},"totalRows":{"type":"number","example":200},"validRows":{"type":"number","example":190},"invalidRows":{"type":"number","example":10},"errors":{"type":"array","items":{"$ref":"#/components/schemas/ImportMapErrorDto"}},"preview":{"type":"array","items":{"$ref":"#/components/schemas/ImportMapPreviewItemDto"}}},"required":["id","status","totalRows","validRows","invalidRows","errors","preview"]},"CommitImportDto":{"type":"object","properties":{"skipInvalidRows":{"type":"boolean","default":true,"description":"Skip invalid rows instead of aborting"}}},"ImportCreatedRecordDto":{"type":"object","properties":{"rowNumber":{"type":"number","example":1},"recordId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid"},"recordType":{"type":"string","example":"SUPPLIER"}},"required":["rowNumber","recordId","recordType"]},"ImportCommitResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"47bd46cc-38aa-4d9f-8553-c0ec6f8885e6","format":"uuid"},"status":{"type":"string","enum":["PENDING_MAPPING","VALIDATED","PROCESSING","COMPLETED","FAILED","ROLLED_BACK"],"example":"COMPLETED"},"totalRows":{"type":"number","example":200},"successRows":{"type":"number","example":190},"failedRows":{"type":"number","example":5},"skippedRows":{"type":"number","example":5},"createdRecords":{"type":"array","items":{"$ref":"#/components/schemas/ImportCreatedRecordDto"}},"completedAt":{"type":"string","example":"2026-02-16T10:10:00.000Z","format":"date-time"}},"required":["id","status","totalRows","successRows","failedRows","skippedRows","createdRecords","completedAt"]},"ImportRollbackResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"47bd46cc-38aa-4d9f-8553-c0ec6f8885e6","format":"uuid"},"status":{"type":"string","enum":["PENDING_MAPPING","VALIDATED","PROCESSING","COMPLETED","FAILED","ROLLED_BACK"],"example":"ROLLED_BACK"},"rolledBackCount":{"type":"number","example":12},"rolledBackAt":{"type":"string","example":"2026-02-16T10:20:00.000Z","format":"date-time"}},"required":["id","status","rolledBackCount","rolledBackAt"]},"ImportBatchListItemDto":{"type":"object","properties":{"id":{"type":"string","example":"47bd46cc-38aa-4d9f-8553-c0ec6f8885e6","format":"uuid"},"module":{"type":"string","enum":["SUPPLIERS","CUSTOMERS","PRODUCTS","OPENING_BALANCES","TRANSACTIONS"]},"fileName":{"type":"string","example":"suppliers.csv","nullable":true},"status":{"type":"string","enum":["PENDING_MAPPING","VALIDATED","PROCESSING","COMPLETED","FAILED","ROLLED_BACK"]},"totalRows":{"type":"number","example":200},"successRows":{"type":"number","example":190},"failedRows":{"type":"number","example":10},"createdAt":{"type":"string","example":"2026-02-16T10:00:00.000Z","format":"date-time"},"updatedAt":{"type":"string","example":"2026-02-16T10:08:00.000Z","format":"date-time"}},"required":["id","module","status","totalRows","successRows","failedRows","createdAt","updatedAt"]},"ImportListResponseDto":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/ImportBatchListItemDto"}},"total":{"type":"number","example":35},"page":{"type":"number","example":1},"limit":{"type":"number","example":20},"totalPages":{"type":"number","example":2}},"required":["data","total","page","limit","totalPages"]},"ImportBatchRowDto":{"type":"object","properties":{"id":{"type":"string","example":"6e8752ab-4de7-4dd5-9fde-c6a13298cd0d","format":"uuid"},"rowNumber":{"type":"number","example":1},"rawDataJson":{"type":"object","additionalProperties":true},"status":{"type":"string","example":"VALID"},"errorMessage":{"type":"string","example":"name is required","nullable":true},"createdRecordId":{"type":"string","example":"9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88","format":"uuid","nullable":true},"createdRecordType":{"type":"string","example":"SUPPLIER","nullable":true}},"required":["id","rowNumber","rawDataJson","status"]},"ImportRowsPaginationDto":{"type":"object","properties":{"total":{"type":"number","example":200},"page":{"type":"number","example":1},"limit":{"type":"number","example":20},"totalPages":{"type":"number","example":10}},"required":["total","page","limit","totalPages"]},"ImportBatchDetailResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"47bd46cc-38aa-4d9f-8553-c0ec6f8885e6","format":"uuid"},"module":{"type":"string","enum":["SUPPLIERS","CUSTOMERS","PRODUCTS","OPENING_BALANCES","TRANSACTIONS"]},"fileName":{"type":"string","example":"suppliers.csv","nullable":true},"status":{"type":"string","enum":["PENDING_MAPPING","VALIDATED","PROCESSING","COMPLETED","FAILED","ROLLED_BACK"]},"totalRows":{"type":"number","example":200},"successRows":{"type":"number","example":190},"failedRows":{"type":"number","example":10},"createdAt":{"type":"string","example":"2026-02-16T10:00:00.000Z","format":"date-time"},"updatedAt":{"type":"string","example":"2026-02-16T10:08:00.000Z","format":"date-time"},"rows":{"type":"array","items":{"$ref":"#/components/schemas/ImportBatchRowDto"}},"rowsPagination":{"$ref":"#/components/schemas/ImportRowsPaginationDto"}},"required":["id","module","status","totalRows","successRows","failedRows","createdAt","updatedAt","rows","rowsPagination"]}}}}