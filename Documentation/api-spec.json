{
  "openapi": "3.0.0",
  "paths": {
    "/api/v1/auth/register": {
      "post": {
        "operationId": "AuthController_register",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RegisterDto" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tenant and owner created",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AuthResponseDto" }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "409": {
            "description": "Email already exists",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "summary": "Register a new tenant and owner user",
        "tags": ["Auth"]
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "operationId": "AuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/LoginDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AuthResponseDto" }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Authentication failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "summary": "Authenticate user and return tokens",
        "tags": ["Auth"]
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "operationId": "AuthController_refresh",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RefreshTokenDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "New access token issued",
            "content": {
              "application/json": {
                "schema": {
                  "properties": { "accessToken": { "type": "string" } }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or expired refresh token",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "summary": "Exchange a refresh token for a new access token",
        "tags": ["Auth"]
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "operationId": "AuthController_logout",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RefreshTokenDto" }
            }
          }
        },
        "responses": { "200": { "description": "Token revoked" } },
        "summary": "Revoke a refresh token",
        "tags": ["Auth"]
      }
    },
    "/api/v1/health": {
      "get": {
        "operationId": "HealthController_getHealth",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Service is healthy",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HealthResponseDto" }
              }
            }
          },
          "503": {
            "description": "Database is unavailable",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "summary": "Service health check",
        "tags": ["Health"]
      }
    },
    "/api/v1/version": {
      "get": {
        "operationId": "VersionController_getVersion",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Version information",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/VersionResponseDto" }
              }
            }
          }
        },
        "summary": "Build and runtime version info",
        "tags": ["Health"]
      }
    },
    "/api/v1/suppliers": {
      "post": {
        "operationId": "SuppliersController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CreateSupplierDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Supplier created",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SupplierResponseDto" }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "409": {
            "description": "Supplier name already exists",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create supplier",
        "tags": ["Suppliers"]
      },
      "get": {
        "operationId": "SuppliersController_findAll",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "Search by name or phone",
            "schema": { "example": "acme", "type": "string" }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "schema": {
              "enum": ["ACTIVE", "INACTIVE", "ALL"],
              "type": "string"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "schema": { "enum": ["name", "createdAt"], "type": "string" }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "schema": { "enum": ["asc", "desc"], "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Supplier list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SupplierListResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "List suppliers",
        "tags": ["Suppliers"]
      }
    },
    "/api/v1/suppliers/{id}": {
      "get": {
        "operationId": "SuppliersController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Supplier UUID",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Supplier detail",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SupplierResponseDto" }
              }
            }
          },
          "400": {
            "description": "Invalid UUID",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Supplier not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get supplier by id",
        "tags": ["Suppliers"]
      },
      "patch": {
        "operationId": "SuppliersController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Supplier UUID",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateSupplierDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Supplier updated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SupplierResponseDto" }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Supplier not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "409": {
            "description": "Supplier name already exists",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Update supplier",
        "tags": ["Suppliers"]
      }
    },
    "/api/v1/suppliers/{id}/status": {
      "patch": {
        "operationId": "SuppliersController_updateStatus",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Supplier UUID",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateStatusDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Supplier status updated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SupplierResponseDto" }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Supplier not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Update supplier status",
        "tags": ["Suppliers"]
      }
    },
    "/api/v1/suppliers/{id}/balance": {
      "get": {
        "operationId": "SuppliersController_getBalance",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Supplier UUID",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Supplier balance",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SupplierBalanceResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid UUID",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Supplier not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get supplier balance",
        "tags": ["Suppliers"]
      }
    },
    "/api/v1/suppliers/{id}/open-documents": {
      "get": {
        "operationId": "SuppliersController_getOpenDocuments",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Supplier UUID",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Open documents list" },
          "400": {
            "description": "Invalid UUID",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Supplier not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get outstanding purchase documents for a supplier",
        "tags": ["Suppliers"]
      }
    },
    "/api/v1/customers": {
      "post": {
        "operationId": "CustomersController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CreateCustomerDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Customer created",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CustomerResponseDto" }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "409": {
            "description": "Customer name already exists",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create customer",
        "tags": ["Customers"]
      },
      "get": {
        "operationId": "CustomersController_findAll",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "Search by name or phone",
            "schema": { "example": "zaeem", "type": "string" }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "schema": {
              "enum": ["ACTIVE", "INACTIVE", "ALL"],
              "type": "string"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "schema": { "enum": ["name", "createdAt"], "type": "string" }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "schema": { "enum": ["asc", "desc"], "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Customer list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CustomerListResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "List customers",
        "tags": ["Customers"]
      }
    },
    "/api/v1/customers/{id}": {
      "get": {
        "operationId": "CustomersController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Customer UUID",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Customer detail",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CustomerResponseDto" }
              }
            }
          },
          "400": {
            "description": "Invalid UUID",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Customer not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get customer by id",
        "tags": ["Customers"]
      },
      "patch": {
        "operationId": "CustomersController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Customer UUID",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateCustomerDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Customer updated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CustomerResponseDto" }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Customer not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "409": {
            "description": "Customer name already exists",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Update customer",
        "tags": ["Customers"]
      }
    },
    "/api/v1/customers/{id}/status": {
      "patch": {
        "operationId": "CustomersController_updateStatus",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Customer UUID",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateStatusDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Customer status updated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CustomerResponseDto" }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Customer not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Update customer status",
        "tags": ["Customers"]
      }
    },
    "/api/v1/customers/{id}/balance": {
      "get": {
        "operationId": "CustomersController_getBalance",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Customer UUID",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Customer balance",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CustomerBalanceResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid UUID",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Customer not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get customer balance",
        "tags": ["Customers"]
      }
    },
    "/api/v1/customers/{id}/open-documents": {
      "get": {
        "operationId": "CustomersController_getOpenDocuments",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Customer UUID",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Open documents list" },
          "400": {
            "description": "Invalid UUID",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Customer not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get outstanding sale documents for a customer",
        "tags": ["Customers"]
      }
    },
    "/api/v1/products": {
      "post": {
        "operationId": "ProductsController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CreateProductDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Product created",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProductResponseDto" }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "409": {
            "description": "SKU already exists for this tenant",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create product",
        "tags": ["Products"]
      },
      "get": {
        "operationId": "ProductsController_findAll",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "Search by name, SKU, or category",
            "schema": { "example": "rice", "type": "string" }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "schema": {
              "enum": ["ACTIVE", "INACTIVE", "ALL"],
              "type": "string"
            }
          },
          {
            "name": "category",
            "required": false,
            "in": "query",
            "schema": { "example": "Grocery", "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Product list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductListResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "List products",
        "tags": ["Products"]
      }
    },
    "/api/v1/products/{id}": {
      "get": {
        "operationId": "ProductsController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Product UUID",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Product detail",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProductResponseDto" }
              }
            }
          },
          "400": {
            "description": "Invalid UUID",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Product not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get product by id",
        "tags": ["Products"]
      },
      "patch": {
        "operationId": "ProductsController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Product UUID",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateProductDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Product updated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProductResponseDto" }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Product not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "409": {
            "description": "SKU already exists for this tenant",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Update product",
        "tags": ["Products"]
      }
    },
    "/api/v1/products/{id}/status": {
      "patch": {
        "operationId": "ProductsController_updateStatus",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Product UUID",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateStatusDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Product status updated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProductResponseDto" }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Product not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Update product status",
        "tags": ["Products"]
      }
    },
    "/api/v1/products/{id}/stock": {
      "get": {
        "operationId": "ProductsController_getStock",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Product UUID",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Product stock",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductStockResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid UUID",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Product not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get product stock and average cost",
        "tags": ["Products"]
      }
    },
    "/api/v1/payment-accounts": {
      "post": {
        "operationId": "PaymentAccountsController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePaymentAccountDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payment account created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentAccountResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "409": {
            "description": "Payment account name already exists",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create payment account",
        "tags": ["Payment Accounts"]
      },
      "get": {
        "operationId": "PaymentAccountsController_findAll",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "type",
            "required": false,
            "in": "query",
            "schema": {
              "enum": ["CASH", "BANK", "WALLET", "CARD"],
              "type": "string"
            }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "schema": {
              "enum": ["ACTIVE", "INACTIVE", "ALL"],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payment account list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentAccountListResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "List payment accounts",
        "tags": ["Payment Accounts"]
      }
    },
    "/api/v1/payment-accounts/{id}": {
      "get": {
        "operationId": "PaymentAccountsController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Payment account UUID",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Payment account detail",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentAccountResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid UUID",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Payment account not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get payment account by id",
        "tags": ["Payment Accounts"]
      },
      "patch": {
        "operationId": "PaymentAccountsController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Payment account UUID",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePaymentAccountDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payment account updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentAccountResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Payment account not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "409": {
            "description": "Payment account name already exists",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Update payment account",
        "tags": ["Payment Accounts"]
      }
    },
    "/api/v1/payment-accounts/{id}/status": {
      "patch": {
        "operationId": "PaymentAccountsController_updateStatus",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Payment account UUID",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateStatusDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payment account status updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentAccountResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Payment account not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Update payment account status",
        "tags": ["Payment Accounts"]
      }
    },
    "/api/v1/payment-accounts/{id}/balance": {
      "get": {
        "operationId": "PaymentAccountsController_getBalance",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Payment account UUID",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Payment account balance",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentAccountBalanceResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid UUID",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Payment account not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get payment account balance",
        "tags": ["Payment Accounts"]
      }
    },
    "/api/v1/transactions/purchases/draft": {
      "post": {
        "operationId": "TransactionsController_createPurchaseDraft",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePurchaseDraftDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Purchase draft created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Supplier or product not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "422": {
            "description": "Supplier or product inactive",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create purchase draft",
        "tags": ["Transactions"]
      }
    },
    "/api/v1/transactions/sales/draft": {
      "post": {
        "operationId": "TransactionsController_createSaleDraft",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CreateSaleDraftDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sale draft created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Customer or product not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "422": {
            "description": "Customer or product inactive",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create sale draft",
        "tags": ["Transactions"]
      }
    },
    "/api/v1/transactions/supplier-payments/draft": {
      "post": {
        "operationId": "TransactionsController_createSupplierPaymentDraft",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSupplierPaymentDraftDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Supplier payment draft created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Supplier or payment account not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "422": {
            "description": "Supplier or payment account inactive",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create supplier payment draft",
        "tags": ["Transactions"]
      }
    },
    "/api/v1/transactions/customer-payments/draft": {
      "post": {
        "operationId": "TransactionsController_createCustomerPaymentDraft",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCustomerPaymentDraftDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Customer payment draft created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Customer or payment account not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "422": {
            "description": "Customer or payment account inactive",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create customer payment draft",
        "tags": ["Transactions"]
      }
    },
    "/api/v1/transactions/supplier-returns/draft": {
      "post": {
        "operationId": "TransactionsController_createSupplierReturnDraft",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSupplierReturnDraftDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Supplier return draft created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Supplier or source line not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "422": {
            "description": "Over-return or invalid source line",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create supplier return draft",
        "tags": ["Transactions"]
      }
    },
    "/api/v1/transactions/customer-returns/draft": {
      "post": {
        "operationId": "TransactionsController_createCustomerReturnDraft",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCustomerReturnDraftDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Customer return draft created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Customer or source line not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "422": {
            "description": "Over-return or invalid source line",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create customer return draft",
        "tags": ["Transactions"]
      }
    },
    "/api/v1/transactions/internal-transfers/draft": {
      "post": {
        "operationId": "TransactionsController_createInternalTransferDraft",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateInternalTransferDraftDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Internal transfer draft created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed or same account",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Payment account not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "422": {
            "description": "Payment account inactive",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create internal transfer draft",
        "tags": ["Transactions"]
      }
    },
    "/api/v1/transactions/adjustments/draft": {
      "post": {
        "operationId": "TransactionsController_createAdjustmentDraft",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAdjustmentDraftDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Adjustment draft created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Product not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "422": {
            "description": "Product inactive",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create adjustment draft (OWNER/ADMIN only)",
        "tags": ["Transactions"]
      }
    },
    "/api/v1/transactions/allocations": {
      "get": {
        "operationId": "TransactionsController_listAllocations",
        "parameters": [
          {
            "name": "supplierId",
            "required": false,
            "in": "query",
            "description": "Filter by supplier",
            "schema": { "type": "string" }
          },
          {
            "name": "customerId",
            "required": false,
            "in": "query",
            "description": "Filter by customer",
            "schema": { "type": "string" }
          },
          {
            "name": "purchaseId",
            "required": false,
            "in": "query",
            "description": "Filter by applies-to purchase transaction",
            "schema": { "type": "string" }
          },
          {
            "name": "saleId",
            "required": false,
            "in": "query",
            "description": "Filter by applies-to sale transaction",
            "schema": { "type": "string" }
          },
          {
            "name": "dateFrom",
            "required": false,
            "in": "query",
            "description": "Filter allocations from this date (inclusive)",
            "schema": { "type": "string" }
          },
          {
            "name": "dateTo",
            "required": false,
            "in": "query",
            "description": "Filter allocations to this date (inclusive)",
            "schema": { "type": "string" }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": { "default": 1, "type": "number" }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": { "maximum": 100, "default": 20, "type": "number" }
          }
        ],
        "responses": {
          "200": { "description": "Allocation list" },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "List allocations",
        "tags": ["Transactions"]
      }
    },
    "/api/v1/transactions/{id}/post": {
      "post": {
        "operationId": "TransactionsController_post",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Transaction UUID",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/PostTransactionDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Transaction posted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Transaction not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Post transaction (finalize & create entries)",
        "tags": ["Transactions"]
      }
    },
    "/api/v1/transactions": {
      "get": {
        "operationId": "TransactionsController_findAll",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "type",
            "required": false,
            "in": "query",
            "schema": {
              "enum": ["PURCHASE", "SALE", "RETURN", "TRANSFER"],
              "type": "string"
            }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "schema": { "enum": ["DRAFT", "POSTED", "VOID"], "type": "string" }
          },
          {
            "name": "dateFrom",
            "required": false,
            "in": "query",
            "schema": { "example": "2026-02-01", "type": "string" }
          },
          {
            "name": "dateTo",
            "required": false,
            "in": "query",
            "schema": { "example": "2026-02-11", "type": "string" }
          },
          {
            "name": "supplierId",
            "required": false,
            "in": "query",
            "schema": { "example": "supplier-uuid", "type": "string" }
          },
          {
            "name": "customerId",
            "required": false,
            "in": "query",
            "schema": { "example": "customer-uuid", "type": "string" }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "schema": {
              "enum": ["transactionDate", "createdAt", "totalAmount"],
              "type": "string"
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "schema": { "enum": ["asc", "desc"], "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Transaction list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionListResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "List transactions",
        "tags": ["Transactions"]
      }
    },
    "/api/v1/transactions/{id}": {
      "get": {
        "operationId": "TransactionsController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Transaction UUID",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Transaction detail",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid UUID",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Transaction not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get transaction by id",
        "tags": ["Transactions"]
      }
    },
    "/api/v1/reports/suppliers/{id}/balance": {
      "get": {
        "operationId": "ReportsController_getSupplierBalance",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Supplier UUID",
            "schema": { "type": "string" }
          },
          {
            "name": "asOfDate",
            "required": false,
            "in": "query",
            "description": "Point-in-time date (defaults to today)",
            "schema": { "example": "2026-02-20", "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Supplier balance with breakdown" },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Supplier not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Supplier balance report (point-in-time)",
        "tags": ["Reports"]
      }
    },
    "/api/v1/reports/customers/{id}/balance": {
      "get": {
        "operationId": "ReportsController_getCustomerBalance",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Customer UUID",
            "schema": { "type": "string" }
          },
          {
            "name": "asOfDate",
            "required": false,
            "in": "query",
            "description": "Point-in-time date (defaults to today)",
            "schema": { "example": "2026-02-20", "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Customer balance with breakdown" },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Customer not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Customer balance report (point-in-time)",
        "tags": ["Reports"]
      }
    },
    "/api/v1/reports/payment-accounts/{id}/balance": {
      "get": {
        "operationId": "ReportsController_getPaymentAccountBalance",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Payment account UUID",
            "schema": { "type": "string" }
          },
          {
            "name": "asOfDate",
            "required": false,
            "in": "query",
            "description": "Point-in-time date (defaults to today)",
            "schema": { "example": "2026-02-20", "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Payment account balance with breakdown" },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Payment account not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Payment account balance report (point-in-time)",
        "tags": ["Reports"]
      }
    },
    "/api/v1/reports/products/{id}/stock": {
      "get": {
        "operationId": "ReportsController_getProductStock",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Product UUID",
            "schema": { "type": "string" }
          },
          {
            "name": "asOfDate",
            "required": false,
            "in": "query",
            "description": "Point-in-time date (defaults to today)",
            "schema": { "example": "2026-02-20", "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Product stock with movement breakdown" },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Product not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Product stock report (point-in-time)",
        "tags": ["Reports"]
      }
    },
    "/api/v1/reports/pending-receivables": {
      "get": {
        "operationId": "ReportsController_getPendingReceivables",
        "parameters": [
          {
            "name": "asOfDate",
            "required": false,
            "in": "query",
            "description": "Point-in-time date (defaults to today)",
            "schema": { "example": "2026-02-20", "type": "string" }
          },
          {
            "name": "customerId",
            "required": false,
            "in": "query",
            "description": "Filter to a single customer",
            "schema": { "type": "string" }
          },
          {
            "name": "minAmount",
            "required": false,
            "in": "query",
            "description": "Minimum balance threshold (default 0)",
            "schema": { "example": 0, "type": "number" }
          }
        ],
        "responses": {
          "200": {
            "description": "Pending receivables list with open documents"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Pending receivables  all customers with outstanding AR balances",
        "tags": ["Reports"]
      }
    },
    "/api/v1/reports/pending-payables": {
      "get": {
        "operationId": "ReportsController_getPendingPayables",
        "parameters": [
          {
            "name": "asOfDate",
            "required": false,
            "in": "query",
            "description": "Point-in-time date (defaults to today)",
            "schema": { "example": "2026-02-20", "type": "string" }
          },
          {
            "name": "supplierId",
            "required": false,
            "in": "query",
            "description": "Filter to a single supplier",
            "schema": { "type": "string" }
          },
          {
            "name": "minAmount",
            "required": false,
            "in": "query",
            "description": "Minimum balance threshold (default 0)",
            "schema": { "example": 0, "type": "number" }
          }
        ],
        "responses": {
          "200": { "description": "Pending payables list with open documents" },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Pending payables  all suppliers with outstanding AP balances",
        "tags": ["Reports"]
      }
    },
    "/api/v1/reports/suppliers/{id}/statement": {
      "get": {
        "operationId": "ReportsController_getSupplierStatement",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Supplier UUID",
            "schema": { "type": "string" }
          },
          {
            "name": "dateFrom",
            "required": true,
            "in": "query",
            "description": "Start date inclusive (YYYY-MM-DD)",
            "schema": { "example": "2026-01-01", "type": "string" }
          },
          {
            "name": "dateTo",
            "required": true,
            "in": "query",
            "description": "End date inclusive (YYYY-MM-DD)",
            "schema": { "example": "2026-02-20", "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Supplier statement with opening/closing balance and ledger entries"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Supplier not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Supplier account statement with running balance",
        "tags": ["Reports"]
      }
    },
    "/api/v1/reports/customers/{id}/statement": {
      "get": {
        "operationId": "ReportsController_getCustomerStatement",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Customer UUID",
            "schema": { "type": "string" }
          },
          {
            "name": "dateFrom",
            "required": true,
            "in": "query",
            "description": "Start date inclusive (YYYY-MM-DD)",
            "schema": { "example": "2026-01-01", "type": "string" }
          },
          {
            "name": "dateTo",
            "required": true,
            "in": "query",
            "description": "End date inclusive (YYYY-MM-DD)",
            "schema": { "example": "2026-02-20", "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Customer statement with opening/closing balance and ledger entries"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Customer not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Customer account statement with running balance",
        "tags": ["Reports"]
      }
    },
    "/api/v1/reports/payment-accounts/{id}/statement": {
      "get": {
        "operationId": "ReportsController_getPaymentAccountStatement",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Payment account UUID",
            "schema": { "type": "string" }
          },
          {
            "name": "dateFrom",
            "required": true,
            "in": "query",
            "description": "Start date inclusive (YYYY-MM-DD)",
            "schema": { "example": "2026-01-01", "type": "string" }
          },
          {
            "name": "dateTo",
            "required": true,
            "in": "query",
            "description": "End date inclusive (YYYY-MM-DD)",
            "schema": { "example": "2026-02-20", "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Payment account statement with opening/closing balance"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          },
          "404": {
            "description": "Payment account not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Payment account statement with running balance",
        "tags": ["Reports"]
      }
    },
    "/api/v1/dashboard/summary": {
      "get": {
        "operationId": "DashboardController_getSummary",
        "parameters": [
          {
            "name": "asOfDate",
            "required": false,
            "in": "query",
            "description": "Point-in-time date (defaults to today)",
            "schema": { "example": "2026-02-15", "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Dashboard summary with cash, inventory, receivables, payables, and recent activity"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiErrorResponse" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Dashboard summary  tenant-wide financial snapshot",
        "tags": ["Dashboard"]
      }
    },
    "/api/v1/imports": {
      "post": {
        "operationId": "ImportsController_upload",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": ["file", "module"],
                "properties": {
                  "file": { "type": "string", "format": "binary" },
                  "module": {
                    "type": "string",
                    "enum": [
                      "SUPPLIERS",
                      "CUSTOMERS",
                      "PRODUCTS",
                      "OPENING_BALANCES"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Import batch created with PENDING_MAPPING status"
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Upload a CSV or XLSX file to create an import batch",
        "tags": ["imports"]
      },
      "get": {
        "operationId": "ImportsController_list",
        "parameters": [
          {
            "name": "module",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "SUPPLIERS",
                "CUSTOMERS",
                "PRODUCTS",
                "OPENING_BALANCES",
                "TRANSACTIONS"
              ]
            }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "PENDING_MAPPING",
                "VALIDATED",
                "PROCESSING",
                "COMPLETED",
                "FAILED",
                "ROLLED_BACK"
              ]
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": { "minimum": 1, "default": 1, "type": "number" }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "type": "number"
            }
          }
        ],
        "responses": { "200": { "description": "Import batches list" } },
        "security": [{ "bearer": [] }],
        "summary": "List import batches for the current tenant",
        "tags": ["imports"]
      }
    },
    "/api/v1/imports/{id}/map": {
      "post": {
        "operationId": "ImportsController_mapColumns",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ColumnMappingDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rows validated; batch moved to VALIDATED status"
          },
          "404": { "description": "Import batch not found" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Map CSV/XLSX columns to system fields and validate all rows",
        "tags": ["imports"]
      }
    },
    "/api/v1/imports/{id}/commit": {
      "post": {
        "operationId": "ImportsController_commit",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CommitImportDto" }
            }
          }
        },
        "responses": {
          "200": { "description": "Import committed; records created" },
          "404": { "description": "Import batch not found" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Commit a validated import batch to create records",
        "tags": ["imports"]
      }
    },
    "/api/v1/imports/{id}/rollback": {
      "post": {
        "operationId": "ImportsController_rollback",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Import rolled back" },
          "404": { "description": "Import batch not found" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Rollback a completed import batch (deletes created records if no dependencies)",
        "tags": ["imports"]
      }
    },
    "/api/v1/imports/{id}": {
      "get": {
        "operationId": "ImportsController_detail",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          },
          {
            "name": "page",
            "required": true,
            "in": "query",
            "schema": { "type": "number" }
          },
          {
            "name": "limit",
            "required": true,
            "in": "query",
            "schema": { "type": "number" }
          }
        ],
        "responses": {
          "200": { "description": "Import batch detail" },
          "404": { "description": "Import batch not found" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get import batch detail including paginated rows",
        "tags": ["imports"]
      }
    }
  },
  "info": {
    "title": "Persona Finance API",
    "description": "Multi-tenant finance system. Standard error response format includes: `statusCode`, `message`, `errors[]`, `timestamp`, `path`, `requestId`.",
    "version": "1.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "securitySchemes": {
      "bearer": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http",
        "name": "Authorization",
        "in": "header"
      }
    },
    "schemas": {
      "RegisterDto": {
        "type": "object",
        "properties": {
          "tenantName": {
            "type": "string",
            "example": "Acme Trading Co.",
            "description": "Name of the business / tenant"
          },
          "fullName": {
            "type": "string",
            "example": "Zaeem Hassan",
            "description": "Owner full name"
          },
          "email": {
            "type": "string",
            "example": "zaeem@acme.com",
            "description": "Owner email address"
          },
          "password": {
            "type": "string",
            "example": "MyPass123",
            "description": "Min 8 chars, 1 uppercase, 1 lowercase, 1 number"
          }
        },
        "required": ["tenantName", "fullName", "email", "password"]
      },
      "TenantSummaryDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2"
          },
          "name": { "type": "string", "example": "Acme Trading Co." },
          "baseCurrency": { "type": "string", "example": "PKR" },
          "timezone": { "type": "string", "example": "Asia/Karachi" }
        },
        "required": ["id", "name", "baseCurrency", "timezone"]
      },
      "AuthUserDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "d2f2c7b5-0c2a-4aa2-9c60-6b3f94b7e8d4"
          },
          "tenantId": {
            "type": "string",
            "example": "6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2"
          },
          "fullName": { "type": "string", "example": "Zaeem Hassan" },
          "email": { "type": "string", "example": "zaeem@acme.com" },
          "role": { "type": "string", "example": "OWNER" },
          "tenant": { "$ref": "#/components/schemas/TenantSummaryDto" }
        },
        "required": ["id", "tenantId", "fullName", "email", "role"]
      },
      "AuthResponseDto": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "refreshToken": {
            "type": "string",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "user": { "$ref": "#/components/schemas/AuthUserDto" }
        },
        "required": ["accessToken", "refreshToken", "user"]
      },
      "ApiErrorField": {
        "type": "object",
        "properties": {
          "field": { "type": "string", "example": "name" },
          "message": { "type": "string", "example": "must not be empty" }
        },
        "required": ["field", "message"]
      },
      "ApiErrorResponse": {
        "type": "object",
        "properties": {
          "statusCode": { "type": "number", "example": 400 },
          "message": { "type": "string", "example": "Validation failed" },
          "errors": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/ApiErrorField" }
          },
          "timestamp": {
            "type": "string",
            "example": "2026-02-11T12:00:00.000Z"
          },
          "path": { "type": "string", "example": "/api/v1/customers" },
          "requestId": { "type": "string", "example": "req_123" }
        },
        "required": ["statusCode", "message", "timestamp", "path"]
      },
      "LoginDto": {
        "type": "object",
        "properties": {
          "email": { "type": "string", "example": "zaeem@acme.com" },
          "password": { "type": "string", "example": "MyPass123" }
        },
        "required": ["email", "password"]
      },
      "RefreshTokenDto": {
        "type": "object",
        "properties": {
          "refreshToken": {
            "type": "string",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          }
        },
        "required": ["refreshToken"]
      },
      "HealthComponentStatusDto": {
        "type": "object",
        "properties": {
          "status": { "type": "string", "example": "up" },
          "responseTime": { "type": "string", "example": "12ms" },
          "message": { "type": "string", "example": "Connection timeout" }
        },
        "required": ["status"]
      },
      "HealthInfoDto": {
        "type": "object",
        "properties": {
          "database": {
            "$ref": "#/components/schemas/HealthComponentStatusDto"
          },
          "memory": { "$ref": "#/components/schemas/HealthComponentStatusDto" }
        },
        "required": ["database", "memory"]
      },
      "HealthResponseDto": {
        "type": "object",
        "properties": {
          "status": { "type": "string", "example": "ok" },
          "info": { "$ref": "#/components/schemas/HealthInfoDto" },
          "error": { "type": "object", "example": {} },
          "details": { "$ref": "#/components/schemas/HealthInfoDto" }
        },
        "required": ["status", "info", "error", "details"]
      },
      "VersionResponseDto": {
        "type": "object",
        "properties": {
          "version": { "type": "string", "example": "1.0.0" },
          "environment": { "type": "string", "example": "development" },
          "nodeVersion": { "type": "string", "example": "v20.10.0" },
          "buildDate": {
            "type": "object",
            "example": "2026-02-11T10:00:00.000Z"
          },
          "gitCommit": { "type": "object", "example": "a1b2c3d4" }
        },
        "required": ["version", "environment", "nodeVersion"]
      },
      "CreateSupplierDto": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "example": "Acme Supplies" },
          "phone": {
            "type": "string",
            "example": "03001234567",
            "maxLength": 20
          },
          "address": {
            "type": "string",
            "example": "Site Area, Karachi",
            "maxLength": 500
          },
          "notes": {
            "type": "string",
            "example": "Preferred supplier",
            "maxLength": 1000
          }
        },
        "required": ["name"]
      },
      "SupplierComputedDto": {
        "type": "object",
        "properties": {
          "totalPurchases": {
            "type": "number",
            "example": 0,
            "description": "Derived total purchases in PKR (integer)"
          },
          "currentBalance": {
            "type": "number",
            "example": 0,
            "description": "Derived current balance in PKR (integer)"
          },
          "lastPurchaseDate": {
            "type": "object",
            "example": null,
            "nullable": true
          }
        },
        "required": ["totalPurchases", "currentBalance", "lastPurchaseDate"]
      },
      "SupplierResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88"
          },
          "tenantId": {
            "type": "string",
            "example": "6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2"
          },
          "name": { "type": "string", "example": "Acme Supplies" },
          "phone": { "type": "object", "example": "03001234567" },
          "address": { "type": "object", "example": "Site Area, Karachi" },
          "notes": { "type": "object", "example": "Preferred supplier" },
          "status": { "type": "string", "example": "ACTIVE" },
          "createdAt": {
            "type": "string",
            "example": "2026-02-11T10:00:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "example": "2026-02-11T10:00:00.000Z"
          },
          "createdBy": {
            "type": "object",
            "example": "d2f2c7b5-0c2a-4aa2-9c60-6b3f94b7e8d4"
          },
          "_computed": { "$ref": "#/components/schemas/SupplierComputedDto" }
        },
        "required": [
          "id",
          "tenantId",
          "name",
          "status",
          "createdAt",
          "updatedAt",
          "_computed"
        ]
      },
      "SupplierListMetaDto": {
        "type": "object",
        "properties": {
          "page": { "type": "number", "example": 1 },
          "limit": { "type": "number", "example": 20 },
          "total": { "type": "number", "example": 120 },
          "totalPages": { "type": "number", "example": 6 }
        },
        "required": ["page", "limit", "total", "totalPages"]
      },
      "SupplierListResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/SupplierResponseDto" }
          },
          "meta": { "$ref": "#/components/schemas/SupplierListMetaDto" }
        },
        "required": ["data", "meta"]
      },
      "UpdateSupplierDto": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "example": "Acme Supplies" },
          "phone": {
            "type": "string",
            "example": "03001234567",
            "maxLength": 20
          },
          "address": {
            "type": "string",
            "example": "Site Area, Karachi",
            "maxLength": 500
          },
          "notes": {
            "type": "string",
            "example": "Preferred supplier",
            "maxLength": 1000
          }
        }
      },
      "UpdateStatusDto": {
        "type": "object",
        "properties": {
          "status": { "type": "string", "enum": ["ACTIVE", "INACTIVE"] },
          "reason": { "type": "string", "example": "Duplicate record" }
        },
        "required": ["status"]
      },
      "SupplierBalanceResponseDto": {
        "type": "object",
        "properties": {
          "supplierId": {
            "type": "string",
            "example": "9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88"
          },
          "totalPurchases": {
            "type": "number",
            "example": 150000,
            "description": "Total purchases in PKR (integer)"
          },
          "totalPaid": {
            "type": "number",
            "example": 50000,
            "description": "Total paid in PKR (integer)"
          },
          "currentBalance": {
            "type": "number",
            "example": 100000,
            "description": "Current balance in PKR (integer)"
          }
        },
        "required": [
          "supplierId",
          "totalPurchases",
          "totalPaid",
          "currentBalance"
        ]
      },
      "CreateCustomerDto": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "example": "Zaeem Hassan" },
          "phone": {
            "type": "string",
            "example": "03001234567",
            "maxLength": 20
          },
          "address": {
            "type": "string",
            "example": "Street 10, Karachi",
            "maxLength": 500
          },
          "notes": {
            "type": "string",
            "example": "VIP customer",
            "maxLength": 1000
          }
        },
        "required": ["name"]
      },
      "CustomerComputedDto": {
        "type": "object",
        "properties": {
          "totalSales": {
            "type": "number",
            "example": 0,
            "description": "Derived total sales in PKR (integer)"
          },
          "currentBalance": {
            "type": "number",
            "example": 0,
            "description": "Derived current balance in PKR (integer)"
          },
          "lastSaleDate": {
            "type": "object",
            "example": null,
            "nullable": true
          }
        },
        "required": ["totalSales", "currentBalance", "lastSaleDate"]
      },
      "CustomerResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88"
          },
          "tenantId": {
            "type": "string",
            "example": "6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2"
          },
          "name": { "type": "string", "example": "Zaeem Hassan" },
          "phone": { "type": "object", "example": "03001234567" },
          "address": { "type": "object", "example": "Street 10, Karachi" },
          "notes": { "type": "object", "example": "VIP customer" },
          "status": { "type": "string", "example": "ACTIVE" },
          "createdAt": {
            "type": "string",
            "example": "2026-02-11T10:00:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "example": "2026-02-11T10:00:00.000Z"
          },
          "createdBy": {
            "type": "object",
            "example": "d2f2c7b5-0c2a-4aa2-9c60-6b3f94b7e8d4"
          },
          "_computed": { "$ref": "#/components/schemas/CustomerComputedDto" }
        },
        "required": [
          "id",
          "tenantId",
          "name",
          "status",
          "createdAt",
          "updatedAt",
          "_computed"
        ]
      },
      "CustomerListMetaDto": {
        "type": "object",
        "properties": {
          "page": { "type": "number", "example": 1 },
          "limit": { "type": "number", "example": 20 },
          "total": { "type": "number", "example": 120 },
          "totalPages": { "type": "number", "example": 6 }
        },
        "required": ["page", "limit", "total", "totalPages"]
      },
      "CustomerListResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/CustomerResponseDto" }
          },
          "meta": { "$ref": "#/components/schemas/CustomerListMetaDto" }
        },
        "required": ["data", "meta"]
      },
      "UpdateCustomerDto": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "example": "Zaeem Hassan" },
          "phone": {
            "type": "string",
            "example": "03001234567",
            "maxLength": 20
          },
          "address": {
            "type": "string",
            "example": "Street 10, Karachi",
            "maxLength": 500
          },
          "notes": {
            "type": "string",
            "example": "VIP customer",
            "maxLength": 1000
          }
        }
      },
      "CustomerBalanceResponseDto": {
        "type": "object",
        "properties": {
          "customerId": {
            "type": "string",
            "example": "9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88"
          },
          "totalSales": {
            "type": "number",
            "example": 150000,
            "description": "Total sales in PKR (integer)"
          },
          "totalPayments": {
            "type": "number",
            "example": 40000,
            "description": "Total payments received in PKR (integer)"
          },
          "totalReturns": {
            "type": "number",
            "example": 10000,
            "description": "Total return credits in PKR (integer)"
          },
          "currentBalance": {
            "type": "number",
            "example": 100000,
            "description": "Current balance in PKR (integer)"
          }
        },
        "required": [
          "customerId",
          "totalSales",
          "totalPayments",
          "totalReturns",
          "currentBalance"
        ]
      },
      "CreateProductDto": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "example": "Sella Rice 25kg" },
          "sku": {
            "type": "string",
            "example": "RICE-25KG",
            "maxLength": 50,
            "description": "Uppercase letters, numbers, hyphens, underscores"
          },
          "category": {
            "type": "string",
            "example": "Grocery",
            "maxLength": 100
          },
          "unit": {
            "type": "string",
            "example": "bag",
            "maxLength": 20,
            "default": "piece"
          }
        },
        "required": ["name"]
      },
      "ProductComputedDto": {
        "type": "object",
        "properties": {
          "currentStock": {
            "type": "number",
            "example": 0,
            "description": "Derived current stock quantity"
          },
          "totalPurchased": {
            "type": "number",
            "example": 0,
            "description": "Derived total purchased quantity"
          },
          "totalSold": {
            "type": "number",
            "example": 0,
            "description": "Derived total sold quantity"
          },
          "lastPurchaseDate": {
            "type": "object",
            "example": null,
            "nullable": true
          },
          "lastSaleDate": {
            "type": "object",
            "example": null,
            "nullable": true
          }
        },
        "required": [
          "currentStock",
          "totalPurchased",
          "totalSold",
          "lastPurchaseDate",
          "lastSaleDate"
        ]
      },
      "ProductResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88"
          },
          "tenantId": {
            "type": "string",
            "example": "6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2"
          },
          "name": { "type": "string", "example": "Sella Rice 25kg" },
          "sku": { "type": "object", "example": "RICE-25KG" },
          "category": { "type": "object", "example": "Grocery" },
          "unit": { "type": "object", "example": "bag" },
          "avgCost": {
            "type": "number",
            "example": 125000,
            "description": "Average cost in PKR (integer)"
          },
          "status": { "type": "string", "example": "ACTIVE" },
          "createdAt": {
            "type": "string",
            "example": "2026-02-11T10:00:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "example": "2026-02-11T10:00:00.000Z"
          },
          "createdBy": {
            "type": "object",
            "example": "d2f2c7b5-0c2a-4aa2-9c60-6b3f94b7e8d4"
          },
          "_computed": { "$ref": "#/components/schemas/ProductComputedDto" }
        },
        "required": [
          "id",
          "tenantId",
          "name",
          "avgCost",
          "status",
          "createdAt",
          "updatedAt",
          "_computed"
        ]
      },
      "ProductListMetaDto": {
        "type": "object",
        "properties": {
          "page": { "type": "number", "example": 1 },
          "limit": { "type": "number", "example": 20 },
          "total": { "type": "number", "example": 120 },
          "totalPages": { "type": "number", "example": 6 }
        },
        "required": ["page", "limit", "total", "totalPages"]
      },
      "ProductListResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/ProductResponseDto" }
          },
          "meta": { "$ref": "#/components/schemas/ProductListMetaDto" }
        },
        "required": ["data", "meta"]
      },
      "UpdateProductDto": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "example": "Sella Rice 25kg" },
          "sku": {
            "type": "string",
            "example": "RICE-25KG",
            "maxLength": 50,
            "description": "Uppercase letters, numbers, hyphens, underscores"
          },
          "category": {
            "type": "string",
            "example": "Grocery",
            "maxLength": 100
          },
          "unit": { "type": "string", "example": "bag", "maxLength": 20 }
        }
      },
      "ProductStockResponseDto": {
        "type": "object",
        "properties": {
          "productId": {
            "type": "string",
            "example": "9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88"
          },
          "productName": { "type": "string", "example": "Sella Rice 25kg" },
          "currentStock": { "type": "number", "example": 250 },
          "avgCost": {
            "type": "number",
            "example": 125000,
            "description": "Average cost in PKR (integer)"
          }
        },
        "required": ["productId", "productName", "currentStock", "avgCost"]
      },
      "CreatePaymentAccountDto": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "example": "Main Cash" },
          "type": {
            "type": "string",
            "enum": ["CASH", "BANK", "WALLET", "CARD"]
          },
          "openingBalance": {
            "type": "number",
            "example": 25000,
            "default": 0,
            "description": "Opening balance in PKR (integer)"
          }
        },
        "required": ["name", "type"]
      },
      "PaymentAccountComputedDto": {
        "type": "object",
        "properties": {
          "currentBalance": {
            "type": "number",
            "example": 0,
            "description": "Derived current balance in PKR (integer)"
          },
          "totalIn": {
            "type": "number",
            "example": 0,
            "description": "Derived total in amount in PKR (integer)"
          },
          "totalOut": {
            "type": "number",
            "example": 0,
            "description": "Derived total out amount in PKR (integer)"
          },
          "lastTransactionDate": {
            "type": "object",
            "example": null,
            "nullable": true
          }
        },
        "required": [
          "currentBalance",
          "totalIn",
          "totalOut",
          "lastTransactionDate"
        ]
      },
      "PaymentAccountResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88"
          },
          "tenantId": {
            "type": "string",
            "example": "6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2"
          },
          "name": { "type": "string", "example": "Main Cash" },
          "type": { "type": "string", "example": "CASH" },
          "openingBalance": {
            "type": "number",
            "example": 25000,
            "description": "Opening balance in PKR (integer)"
          },
          "status": { "type": "string", "example": "ACTIVE" },
          "createdAt": {
            "type": "string",
            "example": "2026-02-11T10:00:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "example": "2026-02-11T10:00:00.000Z"
          },
          "createdBy": {
            "type": "object",
            "example": "d2f2c7b5-0c2a-4aa2-9c60-6b3f94b7e8d4"
          },
          "_computed": {
            "$ref": "#/components/schemas/PaymentAccountComputedDto"
          }
        },
        "required": [
          "id",
          "tenantId",
          "name",
          "type",
          "openingBalance",
          "status",
          "createdAt",
          "updatedAt",
          "_computed"
        ]
      },
      "PaymentAccountListMetaDto": {
        "type": "object",
        "properties": {
          "page": { "type": "number", "example": 1 },
          "limit": { "type": "number", "example": 20 },
          "total": { "type": "number", "example": 120 },
          "totalPages": { "type": "number", "example": 6 }
        },
        "required": ["page", "limit", "total", "totalPages"]
      },
      "PaymentAccountListResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PaymentAccountResponseDto"
            }
          },
          "meta": { "$ref": "#/components/schemas/PaymentAccountListMetaDto" }
        },
        "required": ["data", "meta"]
      },
      "UpdatePaymentAccountDto": {
        "type": "object",
        "properties": { "name": { "type": "string", "example": "Main Cash" } }
      },
      "PaymentAccountBalanceResponseDto": {
        "type": "object",
        "properties": {
          "paymentAccountId": {
            "type": "string",
            "example": "9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88"
          },
          "openingBalance": {
            "type": "number",
            "example": 25000,
            "description": "Opening balance in PKR (integer)"
          },
          "totalIn": {
            "type": "number",
            "example": 150000,
            "description": "Total in amount in PKR (integer)"
          },
          "totalOut": {
            "type": "number",
            "example": 50000,
            "description": "Total out amount in PKR (integer)"
          },
          "currentBalance": {
            "type": "number",
            "example": 125000,
            "description": "Current balance in PKR (integer)"
          }
        },
        "required": [
          "paymentAccountId",
          "openingBalance",
          "totalIn",
          "totalOut",
          "currentBalance"
        ]
      },
      "PurchaseLineDto": {
        "type": "object",
        "properties": {
          "productId": { "type": "string", "example": "product-uuid" },
          "quantity": { "type": "number", "example": 5 },
          "unitCost": {
            "type": "number",
            "example": 12000,
            "description": "Unit cost in PKR (integer)"
          },
          "discountAmount": {
            "type": "number",
            "example": 0,
            "description": "Discount amount in PKR (integer)"
          }
        },
        "required": ["productId", "quantity", "unitCost"]
      },
      "CreatePurchaseDraftDto": {
        "type": "object",
        "properties": {
          "supplierId": { "type": "string", "example": "supplier-uuid" },
          "transactionDate": { "type": "string", "example": "2026-02-10" },
          "lines": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/PurchaseLineDto" }
          },
          "deliveryFee": {
            "type": "number",
            "example": 2000,
            "description": "Delivery fee in PKR (integer)"
          },
          "notes": {
            "type": "string",
            "example": "Handle with care",
            "maxLength": 1000
          },
          "idempotencyKey": {
            "type": "string",
            "example": "client-generated-uuid-v4",
            "maxLength": 64,
            "description": "Client-supplied idempotency key"
          }
        },
        "required": ["supplierId", "transactionDate", "lines"]
      },
      "TransactionLineResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "f2bb9d7a-7c7b-4a6d-95d6-5f2d4e1f1b3a"
          },
          "transactionId": {
            "type": "string",
            "example": "9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88"
          },
          "productId": {
            "type": "string",
            "example": "c4c8d1e8-2d1b-4f2b-9f8a-2b3d9a8d1f0a"
          },
          "quantity": { "type": "number", "example": 5 },
          "unitCost": {
            "type": "number",
            "example": 12000,
            "description": "Unit cost/price in PKR (integer)"
          },
          "unitPrice": {
            "type": "number",
            "example": 15000,
            "description": "Unit cost/price in PKR (integer)"
          },
          "discountAmount": {
            "type": "number",
            "example": 0,
            "description": "Discount amount in PKR (integer)"
          },
          "lineTotal": {
            "type": "number",
            "example": 60000,
            "description": "Line total in PKR (integer)"
          },
          "costTotal": {
            "type": "number",
            "example": 60000,
            "description": "Cost total in PKR (integer)"
          }
        },
        "required": [
          "id",
          "transactionId",
          "productId",
          "quantity",
          "unitCost",
          "unitPrice",
          "discountAmount",
          "lineTotal",
          "costTotal"
        ]
      },
      "TransactionResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "9f4b6e2c-0a2d-4cc5-8c4d-1a4a88c81a88"
          },
          "tenantId": {
            "type": "string",
            "example": "6c6f7f48-3d5b-4a3f-9b1d-9c0d73b0c3d2"
          },
          "type": { "type": "string", "example": "PURCHASE" },
          "status": { "type": "string", "example": "DRAFT" },
          "transactionDate": {
            "type": "string",
            "example": "2026-02-10T00:00:00.000Z"
          },
          "supplierId": { "type": "object", "example": "supplier-uuid" },
          "customerId": { "type": "object", "example": "customer-uuid" },
          "subtotal": {
            "type": "number",
            "example": 50000,
            "description": "Subtotal in PKR (integer)"
          },
          "discountTotal": {
            "type": "number",
            "example": 0,
            "description": "Discount total in PKR (integer)"
          },
          "deliveryFee": {
            "type": "number",
            "example": 2000,
            "description": "Delivery fee in PKR (integer)"
          },
          "totalAmount": {
            "type": "number",
            "example": 52000,
            "description": "Total amount in PKR (integer)"
          },
          "deliveryType": { "type": "object", "example": "DELIVERY" },
          "deliveryAddress": {
            "type": "object",
            "example": "Karachi, Pakistan"
          },
          "notes": { "type": "object", "example": "Urgent" },
          "createdAt": {
            "type": "string",
            "example": "2026-02-11T10:00:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "example": "2026-02-11T10:00:00.000Z"
          },
          "transactionLines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TransactionLineResponseDto"
            }
          }
        },
        "required": [
          "id",
          "tenantId",
          "type",
          "status",
          "transactionDate",
          "subtotal",
          "discountTotal",
          "deliveryFee",
          "totalAmount",
          "createdAt",
          "updatedAt",
          "transactionLines"
        ]
      },
      "SaleLineDto": {
        "type": "object",
        "properties": {
          "productId": { "type": "string", "example": "product-uuid" },
          "quantity": { "type": "number", "example": 3 },
          "unitPrice": {
            "type": "number",
            "example": 15000,
            "description": "Unit price in PKR (integer)"
          },
          "discountAmount": {
            "type": "number",
            "example": 0,
            "description": "Discount amount in PKR (integer)"
          }
        },
        "required": ["productId", "quantity", "unitPrice"]
      },
      "CreateSaleDraftDto": {
        "type": "object",
        "properties": {
          "customerId": { "type": "string", "example": "customer-uuid" },
          "transactionDate": { "type": "string", "example": "2026-02-10" },
          "lines": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/SaleLineDto" }
          },
          "deliveryFee": {
            "type": "number",
            "example": 1500,
            "description": "Delivery fee in PKR (integer)"
          },
          "deliveryType": {
            "type": "string",
            "enum": ["STORE_PICKUP", "HOME_DELIVERY"]
          },
          "deliveryAddress": {
            "type": "string",
            "example": "Street 10, Karachi",
            "maxLength": 500
          },
          "notes": {
            "type": "string",
            "example": "Deliver before 5 PM",
            "maxLength": 1000
          },
          "idempotencyKey": {
            "type": "string",
            "example": "client-generated-uuid-v4",
            "maxLength": 64,
            "description": "Client-supplied idempotency key"
          }
        },
        "required": ["customerId", "transactionDate", "lines"]
      },
      "CreateSupplierPaymentDraftDto": {
        "type": "object",
        "properties": {
          "supplierId": { "type": "string", "description": "Supplier UUID" },
          "amount": {
            "type": "number",
            "description": "Payment amount in PKR (integer, Min 1)"
          },
          "paymentAccountId": {
            "type": "string",
            "description": "Payment account UUID"
          },
          "transactionDate": {
            "type": "string",
            "example": "2026-02-12",
            "description": "Transaction date (YYYY-MM-DD)"
          },
          "notes": { "type": "string" },
          "idempotencyKey": {
            "type": "string",
            "example": "client-generated-uuid-v4",
            "maxLength": 64,
            "description": "Client-supplied idempotency key"
          }
        },
        "required": [
          "supplierId",
          "amount",
          "paymentAccountId",
          "transactionDate"
        ]
      },
      "CreateCustomerPaymentDraftDto": {
        "type": "object",
        "properties": {
          "customerId": { "type": "string", "description": "Customer UUID" },
          "amount": {
            "type": "number",
            "description": "Payment amount in PKR (integer, Min 1)"
          },
          "paymentAccountId": {
            "type": "string",
            "description": "Payment account UUID"
          },
          "transactionDate": {
            "type": "string",
            "example": "2026-02-12",
            "description": "Transaction date (YYYY-MM-DD)"
          },
          "notes": { "type": "string" },
          "idempotencyKey": {
            "type": "string",
            "example": "client-generated-uuid-v4",
            "maxLength": 64,
            "description": "Client-supplied idempotency key"
          }
        },
        "required": [
          "customerId",
          "amount",
          "paymentAccountId",
          "transactionDate"
        ]
      },
      "SupplierReturnLineDto": {
        "type": "object",
        "properties": {
          "sourceTransactionLineId": {
            "type": "string",
            "example": "source-transaction-line-uuid"
          },
          "quantity": { "type": "number", "example": 2 }
        },
        "required": ["sourceTransactionLineId", "quantity"]
      },
      "CreateSupplierReturnDraftDto": {
        "type": "object",
        "properties": {
          "supplierId": { "type": "string", "example": "supplier-uuid" },
          "transactionDate": { "type": "string", "example": "2026-02-10" },
          "lines": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/SupplierReturnLineDto" }
          },
          "notes": {
            "type": "string",
            "example": "Defective items returned",
            "maxLength": 1000
          },
          "idempotencyKey": {
            "type": "string",
            "example": "client-generated-uuid-v4",
            "maxLength": 64,
            "description": "Client-supplied idempotency key"
          }
        },
        "required": ["supplierId", "transactionDate", "lines"]
      },
      "CustomerReturnLineDto": {
        "type": "object",
        "properties": {
          "sourceTransactionLineId": {
            "type": "string",
            "example": "source-transaction-line-uuid"
          },
          "quantity": { "type": "number", "example": 2 }
        },
        "required": ["sourceTransactionLineId", "quantity"]
      },
      "CreateCustomerReturnDraftDto": {
        "type": "object",
        "properties": {
          "customerId": { "type": "string", "example": "customer-uuid" },
          "transactionDate": { "type": "string", "example": "2026-02-10" },
          "lines": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/CustomerReturnLineDto" }
          },
          "notes": {
            "type": "string",
            "example": "Customer returned wrong size",
            "maxLength": 1000
          },
          "idempotencyKey": {
            "type": "string",
            "example": "client-generated-uuid-v4",
            "maxLength": 64,
            "description": "Client-supplied idempotency key"
          }
        },
        "required": ["customerId", "transactionDate", "lines"]
      },
      "CreateInternalTransferDraftDto": {
        "type": "object",
        "properties": {
          "fromPaymentAccountId": {
            "type": "string",
            "example": "from-account-uuid"
          },
          "toPaymentAccountId": {
            "type": "string",
            "example": "to-account-uuid"
          },
          "amount": {
            "type": "number",
            "example": 5000,
            "description": "Transfer amount in PKR (integer)"
          },
          "transactionDate": { "type": "string", "example": "2026-02-10" },
          "notes": {
            "type": "string",
            "example": "Monthly cash transfer to bank",
            "maxLength": 1000
          },
          "idempotencyKey": {
            "type": "string",
            "example": "client-generated-uuid-v4",
            "maxLength": 64,
            "description": "Client-supplied idempotency key"
          }
        },
        "required": [
          "fromPaymentAccountId",
          "toPaymentAccountId",
          "amount",
          "transactionDate"
        ]
      },
      "AdjustmentLineDto": {
        "type": "object",
        "properties": {
          "productId": { "type": "string", "example": "product-uuid" },
          "quantity": { "type": "number", "example": 5 },
          "direction": {
            "type": "string",
            "enum": ["IN", "OUT"],
            "example": "IN"
          },
          "reason": {
            "type": "string",
            "example": "Damaged goods write-off",
            "maxLength": 500
          }
        },
        "required": ["productId", "quantity", "direction", "reason"]
      },
      "CreateAdjustmentDraftDto": {
        "type": "object",
        "properties": {
          "transactionDate": { "type": "string", "example": "2026-02-10" },
          "lines": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/AdjustmentLineDto" }
          },
          "notes": {
            "type": "string",
            "example": "Year-end stock reconciliation",
            "maxLength": 1000
          },
          "idempotencyKey": {
            "type": "string",
            "example": "client-generated-uuid-v4",
            "maxLength": 64,
            "description": "Client-supplied idempotency key"
          }
        },
        "required": ["transactionDate", "lines"]
      },
      "PaymentAllocationItemDto": {
        "type": "object",
        "properties": {
          "transactionId": {
            "type": "string",
            "description": "The purchase/sale transaction being allocated to"
          },
          "amount": {
            "type": "number",
            "description": "Amount to apply (integer, Min 1)"
          }
        },
        "required": ["transactionId", "amount"]
      },
      "PostTransactionDto": {
        "type": "object",
        "properties": {
          "idempotencyKey": {
            "type": "string",
            "example": "post-2026-02-11-0001",
            "description": "Idempotency key to prevent double posting"
          },
          "paidNow": {
            "type": "number",
            "example": 0,
            "description": "Amount paid now in PKR (integer)"
          },
          "receivedNow": {
            "type": "number",
            "example": 0,
            "description": "Amount received now in PKR (integer)"
          },
          "paymentAccountId": {
            "type": "string",
            "example": "payment-account-uuid"
          },
          "allocations": {
            "description": "Manual allocations (for SUPPLIER_PAYMENT / CUSTOMER_PAYMENT only). Omit for auto-allocation.",
            "type": "array",
            "items": { "$ref": "#/components/schemas/PaymentAllocationItemDto" }
          },
          "returnHandling": {
            "type": "string",
            "enum": ["REFUND_NOW", "STORE_CREDIT"],
            "description": "How to handle a CUSTOMER_RETURN at posting time"
          }
        },
        "required": ["idempotencyKey"]
      },
      "TransactionListMetaDto": {
        "type": "object",
        "properties": {
          "page": { "type": "number", "example": 1 },
          "limit": { "type": "number", "example": 20 },
          "total": { "type": "number", "example": 120 },
          "totalPages": { "type": "number", "example": 6 }
        },
        "required": ["page", "limit", "total", "totalPages"]
      },
      "TransactionListResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/TransactionResponseDto" }
          },
          "meta": { "$ref": "#/components/schemas/TransactionListMetaDto" }
        },
        "required": ["data", "meta"]
      },
      "ColumnMappingDto": {
        "type": "object",
        "properties": {
          "columnMappings": {
            "type": "object",
            "description": "Maps system field names to detected column headers. Key = system field, value = CSV/XLSX column header.",
            "example": { "name": "Company Name", "phone": "Phone Number" }
          }
        },
        "required": ["columnMappings"]
      },
      "CommitImportDto": {
        "type": "object",
        "properties": {
          "skipInvalidRows": {
            "type": "boolean",
            "default": true,
            "description": "Skip invalid rows instead of aborting"
          }
        }
      }
    }
  }
}
